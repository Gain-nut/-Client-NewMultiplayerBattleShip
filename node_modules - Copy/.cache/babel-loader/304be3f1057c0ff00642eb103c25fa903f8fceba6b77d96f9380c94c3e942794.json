{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\battleship-client\\\\src\\\\components\\\\GameBoard.js\",\n  _s = $RefreshSig$();\n// // src/components/GameBoard.js\n// import React from 'react';\n// import './GameBoard.css'; // ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå css ‡∏ô‡∏µ‡πâ‡∏ï‡πà‡∏≠‡πÑ‡∏õ\n\n// // Cell: Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á\n// const Cell = ({ value, onClick }) => {\n//   // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î className ‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á value (‡πÄ‡∏ä‡πà‡∏ô 'ship', 'hit', 'miss')\n//   const cellClass = `cell ${value}`; \n//   return <div className={cellClass} onClick={onClick}></div>;\n// };\n\n// // GameBoard: Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\n// const GameBoard = ({ board, onCellClick }) => {\n//   return (\n//     <div className=\"game-board\">\n//       {board.map((row, rowIndex) =>\n//         row.map((cellValue, colIndex) => (\n//           <Cell\n//             key={`${rowIndex}-${colIndex}`}\n//             value={cellValue}\n//             onClick={() => onCellClick(rowIndex, colIndex)}\n//           />\n//         ))\n//       )}\n//     </div>\n//   );\n// };\n\n// export default GameBoard;\n\n//v2\n// src/components/GameBoard.js\n// import React from 'react';\n// import { useDrop } from 'react-dnd';\n// import { ItemTypes } from './DraggableShip'; // import Type ‡∏°‡∏≤‡πÉ‡∏ä‡πâ\n// import './GameBoard.css';\n\n// const Cell = ({ value, onDrop, rowIndex, colIndex }) => {\n//   const [{ isOver }, drop] = useDrop(() => ({\n//     accept: ItemTypes.SHIP,\n//     // onDrop ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÄ‡∏£‡∏∑‡∏≠‡∏•‡∏á‡∏ö‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ\n//     drop: (item) => onDrop(item.id, { row: rowIndex, col: colIndex }),\n//     collect: (monitor) => ({\n//       isOver: !!monitor.isOver(), // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n//     }),\n//   }));\n\n//   const cellClass = `cell ${value || ''} ${isOver ? 'drop-target' : ''}`;\n\n//   // ref={drop} ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô Drop Target\n//   return <div ref={drop} className={cellClass}></div>;\n// };\n\n// // GameBoard: Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\n// const GameBoard = ({ board, onDropShip }) => {\n//   return (\n//     <div className=\"game-board\">\n//       {board.map((row, rowIndex) =>\n//         row.map((cellValue, colIndex) => (\n//           <Cell\n//             key={`${rowIndex}-${colIndex}`}\n//             value={cellValue}\n//             rowIndex={rowIndex}\n//             colIndex={colIndex}\n//             // ‡∏™‡πà‡∏á onDrop function ‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Cell\n//             onDrop={onDropShip || (() => {})}\n//           />\n//         ))\n//       )}\n//     </div>\n//   );\n// };\n\n// export default GameBoard;\n\n// //v3\n// // src/components/GameBoard.js\n// // src/components/GameBoard.js\n// import React from 'react';\n// import { useDrop } from 'react-dnd';\n// import { ItemTypes } from './DraggableShip';\n// import DraggableShip from './DraggableShip';\n// import './GameBoard.css';\n\n// // A simple cell component, it can now render hits/misses for the gameplay phase\n// const Cell = ({ value, onClick }) => {\n//     const cellClass = `cell ${value || ''}`;\n//     return <div className={cellClass} onClick={onClick}></div>;\n// };\n\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\n//   const [{ isOver }, drop] = useDrop(() => ({\n//     accept: ItemTypes.SHIP,\n//     drop: (item, monitor) => {\n//       const offset = monitor.getClientOffset();\n//       const boardElement = document.querySelector('.game-board');\n//       if (boardElement && onDropShip) {\n//         const rect = boardElement.getBoundingClientRect();\n//         // Calculate grid position from mouse coordinates\n//         const col = Math.round((offset.x - rect.left) / 42); // 40px width + 2px gap\n//         const row = Math.round((offset.y - rect.top) / 42); \n//         onDropShip(item, { row, col });\n//       }\n//     },\n//     collect: (monitor) => ({\n//       isOver: !!monitor.isOver(),\n//     }),\n//   }));\n\n//   return (\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\n//       {/* If boardData is provided (during gameplay), render it. Otherwise, render empty cells. */}\n//       {boardData ? (\n//          boardData.flat().map((cellValue, i) => (\n//             <Cell \n//                 key={i} \n//                 value={cellValue} \n//                 onClick={() => onCellClick(Math.floor(i / 8), i % 8)}\n//             />\n//          ))\n//       ) : (\n//         Array.from({ length: 64 }).map((_, i) => <Cell key={i} />)\n//       )}\n\n//       {/* Render ships that have been placed on the board */}\n//       {ships.map(ship => (\n//         <div\n//           key={ship.id}\n//           className=\"placed-ship\"\n//           style={{\n//             top: `${ship.position.row * 42}px`,\n//             left: `${ship.position.col * 42}px`,\n//           }}\n//         >\n//           <DraggableShip ship={ship} onRotate={onRotateShip} />\n//         </div>\n//       ))}\n//     </div>\n//   );\n// };\n\n// export default GameBoard;\n\n// 10/8/2025 18:00  shadow\n// src/components/GameBoard.js\n// src/components/GameBoard.js\n// src/components/GameBoard.js\n// src/components/GameBoard.js\n// import React, { useState } from 'react'; // <-- ‡πÄ‡∏û‡∏¥‡πà‡∏° useState\n// import { useDrop } from 'react-dnd';\n// import { ItemTypes } from './DraggableShip';\n// import DraggableShip from './DraggableShip';\n// import './GameBoard.css';\n\n// const Cell = ({ value, isHovered, onClick }) => {\n//     // ‡πÄ‡∏û‡∏¥‡πà‡∏° isHovered ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏á‡∏≤\n//     const cellClass = `cell ${value || ''} ${isHovered ? 'hover-preview' : ''}`;\n//     return <div className={cellClass} onClick={onClick}></div>;\n// };\n\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\n//   // State ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏≤‡∏Å‡πÄ‡∏£‡∏∑‡∏≠‡∏°‡∏≤‡∏ó‡∏±‡∏ö\n//   const [hoveredCells, setHoveredCells] = useState([]);\n\n//   const [{ isOver }, drop] = useDrop(() => ({\n//     accept: ItemTypes.SHIP,\n//     // hover: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ item ‡∏•‡∏≤‡∏Å‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ drop target\n//     hover: (item, monitor) => {\n//         const offset = monitor.getClientOffset();\n//         const boardElement = document.querySelector('.game-board');\n//         if (boardElement) {\n//             const rect = boardElement.getBoundingClientRect();\n//             const col = Math.floor((offset.x - rect.left) / 42);\n//             const row = Math.floor((offset.y - rect.top) / 42);\n\n//             const newHoveredCells = [];\n//             for (let i = 0; i < item.length; i++) {\n//                 const r = item.orientation === 'horizontal' ? row : row + i;\n//                 const c = item.orientation === 'horizontal' ? col + i : col;\n//                 if (r >= 0 && r < 8 && c >= 0 && c < 8) {\n//                     newHoveredCells.push({ r, c });\n//                 }\n//             }\n//             setHoveredCells(newHoveredCells);\n//         }\n//     },\n//     drop: (item, monitor) => {\n//       // ... ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô drop ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° ...\n//       setHoveredCells([]); // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏á‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à\n//       const offset = monitor.getClientOffset();\n//       const boardElement = document.querySelector('.game-board');\n//       if (boardElement && onDropShip) {\n//         const rect = boardElement.getBoundingClientRect();\n//         const col = Math.floor((offset.x - rect.left) / 42);\n//         const row = Math.floor((offset.y - rect.top) / 42);\n//         onDropShip(item, { row, col });\n//       }\n//     },\n//     // leave: ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏≤‡∏Å item ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å drop target\n//     leave: () => {\n//         setHoveredCells([]); // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏á‡∏≤\n//     },\n//     collect: (monitor) => ({ isOver: !!monitor.isOver() }),\n//   }));\n\n//   return (\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\n//       {boardData.flat().map((cellValue, i) => {\n//         const rowIndex = Math.floor(i / 8);\n//         const colIndex = i % 8;\n//         const isHovered = hoveredCells.some(cell => cell.r === rowIndex && cell.c === colIndex);\n//         return (\n//             <Cell\n//                 key={i}\n//                 value={cellValue}\n//                 isHovered={isHovered}\n//                 onClick={() => onCellClick(rowIndex, colIndex)}\n//             />\n//         )\n//       })}\n//       {ships.map(ship => (\n//         <div\n//           key={ship.id}\n//           className=\"placed-ship\"\n//           style={{ top: `${ship.position.row * 42}px`, left: `${ship.position.col * 42}px` }}\n//         >\n//           <DraggableShip ship={ship} onClick={onRotateShip} />\n//         </div>\n//       ))}\n//     </div>\n//   );\n// };\n\n// export default GameBoard;\n\n// src/components/Game.js// src/components/Game.js\nimport React, { useState, useEffect } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { socket } from '../socket';\nimport GameBoard from './GameBoard';\nimport DraggableShip, { ItemTypes } from './DraggableShip';\nimport './Game.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialShips = [{\n  id: 1,\n  length: 4,\n  position: null,\n  orientation: 'horizontal'\n}, {\n  id: 2,\n  length: 4,\n  position: null,\n  orientation: 'horizontal'\n}, {\n  id: 3,\n  length: 4,\n  position: null,\n  orientation: 'horizontal'\n}, {\n  id: 4,\n  length: 4,\n  position: null,\n  orientation: 'horizontal'\n}];\nfunction Game({\n  gameState,\n  nickname\n}) {\n  _s();\n  const [myShips, setMyShips] = useState(initialShips);\n  const [isPlacementValid, setIsPlacementValid] = useState(false);\n  const myPlayerId = gameState !== null && gameState !== void 0 && gameState.players ? Object.keys(gameState.players).find(id => gameState.players[id].nickname === nickname) : null;\n  const me = myPlayerId ? gameState.players[myPlayerId] : null;\n  const validateBoard = allShips => {\n    const placedShips = allShips.filter(s => s.position);\n    if (placedShips.length !== 4) return false;\n    const allOccupiedCells = new Set();\n    for (const ship of placedShips) {\n      for (let i = 0; i < ship.length; i++) {\n        const row = ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i;\n        const col = ship.orientation === 'horizontal' ? ship.position.col : ship.position.col;\n        const coord = `${row},${col}`;\n        if (allOccupiedCells.has(coord) || row < 0 || row > 7 || col < 0 || col > 7) {\n          return false;\n        }\n        allOccupiedCells.add(coord);\n      }\n    }\n    return true;\n  };\n  useEffect(() => {\n    setIsPlacementValid(validateBoard(myShips));\n  }, [myShips]);\n  useEffect(() => {\n    if ((gameState === null || gameState === void 0 ? void 0 : gameState.gameStatus) === 'placing' && (me === null || me === void 0 ? void 0 : me.ships.length) === 0) {\n      if (!myShips.some(s => s.position !== null)) {\n        setMyShips(initialShips);\n      }\n    }\n    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏£‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°‡∏ñ‡∏π‡∏Å‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå\n    if ((gameState === null || gameState === void 0 ? void 0 : gameState.gameStatus) === 'waiting') {\n      setMyShips(initialShips);\n    }\n  }, [gameState, me]);\n  const handleShipDrop = (droppedShip, newPosition) => {\n    const tempShips = myShips.map(ship => ship.id === droppedShip.id ? {\n      ...ship,\n      position: newPosition,\n      orientation: droppedShip.orientation\n    } : ship);\n    setMyShips(tempShips); // ‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß useEffect ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏á\n  };\n  const handleRotateShip = shipId => {\n    setMyShips(ships => ships.map(s => {\n      if (s.id === shipId) {\n        const newOrientation = s.orientation === 'horizontal' ? 'vertical' : 'horizontal';\n        return {\n          ...s,\n          orientation: newOrientation\n        };\n      }\n      return s;\n    }));\n  };\n  const [, dropPalette] = useDrop(() => ({\n    accept: ItemTypes.SHIP,\n    drop: item => {\n      setMyShips(ships => ships.map(s => s.id === item.id ? {\n        ...s,\n        position: null\n      } : s));\n    }\n  }));\n  const handleConfirmPlacement = () => {\n    if (!isPlacementValid) {\n      alert('Invalid ship placement. Ships might be overlapping, outside the board, or not all ships are placed.');\n      return;\n    }\n    const allShipParts = [];\n    myShips.filter(s => s.position).forEach(ship => {\n      for (let i = 0; i < ship.length; i++) {\n        allShipParts.push({\n          row: ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i,\n          col: ship.orientation === 'horizontal' ? ship.position.col + i : ship.position.col\n        });\n      }\n    });\n    socket.emit('place-ships', allShipParts);\n  };\n  if (!gameState || !me) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading or connecting...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 342,\n    columnNumber: 33\n  }, this);\n\n  // --- ‡∏™‡πà‡∏ß‡∏ô RENDER ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô ---\n\n  // RENDER: WAITING ROOM\n  if (gameState.gameStatus === 'waiting') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"waiting-room\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Welcome, \", nickname, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Waiting for another player to join...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 7\n    }, this);\n  }\n\n  // RENDER: PLACEMENT PHASE\n  if (gameState.gameStatus === 'placing') {\n    if (me.ships.length > 0) {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Waiting for opponent to place ships...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 14\n      }, this);\n    }\n    const shipsOnBoard = myShips.filter(s => s.position !== null);\n    const shipsInPalette = myShips.filter(s => s.position === null);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"placement-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Place Your Fleet (Click ship to rotate)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(GameBoard, {\n        ships: shipsOnBoard,\n        onDropShip: handleShipDrop,\n        onRotateShip: handleRotateShip,\n        boardData: Array(8).fill(Array(8).fill(null)),\n        onCellClick: () => {}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ship-palette\",\n        ref: dropPalette,\n        children: shipsInPalette.map(s => /*#__PURE__*/_jsxDEV(DraggableShip, {\n          ship: s,\n          onClick: handleRotateShip\n        }, s.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 36\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleConfirmPlacement,\n        disabled: !isPlacementValid,\n        children: \"Confirm Placement\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this);\n  }\n\n  // RENDER: PLAYING & GAME OVER PHASES\n  if (gameState.gameStatus === 'playing' || gameState.gameStatus === 'gameover') {\n    var _gameState$players$ga;\n    const opponentId = Object.keys(gameState.players).find(id => id !== myPlayerId);\n    const opponent = opponentId ? gameState.players[opponentId] : null;\n    const isMyTurn = gameState.currentPlayerTurn === myPlayerId;\n    const myDisplayBoard = Array(8).fill(null).map(() => Array(8).fill(null));\n    me.ships.forEach(part => {\n      myDisplayBoard[part.row][part.col] = 'ship';\n    });\n    me.gameBoard.forEach((row, r_idx) => {\n      row.forEach((cell, c_idx) => {\n        if (cell) myDisplayBoard[r_idx][c_idx] = cell;\n      });\n    });\n    const handleFire = (row, col) => {\n      if (isMyTurn && gameState.gameStatus === 'playing' && !opponent.gameBoard[row][col]) {\n        socket.emit('fire-shot', {\n          row,\n          col\n        });\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"playing-container\",\n      children: [gameState.gameStatus === 'playing' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"turn-indicator\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: isMyTurn ? 'my-turn' : '',\n            children: [\" \", isMyTurn ? \"üî• Your Turn!\" : `Waiting for ${opponent === null || opponent === void 0 ? void 0 : opponent.nickname}'s turn...`, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timer\",\n            children: [\"Time Left: \", gameState.timer]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"boards-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"board-area\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"Your Board (Score: \", me.score, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(GameBoard, {\n              ships: [],\n              boardData: myDisplayBoard,\n              onCellClick: () => {}\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"board-area\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [opponent === null || opponent === void 0 ? void 0 : opponent.nickname, \"'s Board (Score: \", (opponent === null || opponent === void 0 ? void 0 : opponent.score) || 0, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this), opponent ? /*#__PURE__*/_jsxDEV(GameBoard, {\n              ships: [],\n              onCellClick: handleFire,\n              boardData: opponent.gameBoard\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Waiting...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 112\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), gameState.gameStatus === 'gameover' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-over\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Game Over!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 79\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Winner is: \", (_gameState$players$ga = gameState.players[gameState.winner]) === null || _gameState$players$ga === void 0 ? void 0 : _gameState$players$ga.nickname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 99\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 51\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Unhandled game state: \", gameState.gameStatus]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 430,\n    columnNumber: 10\n  }, this);\n}\n_s(Game, \"dZS1Nbf8Ik5elDExBFbSGP9IpZo=\", false, function () {\n  return [useDrop];\n});\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useState","useEffect","useDrop","socket","GameBoard","DraggableShip","ItemTypes","jsxDEV","_jsxDEV","Fragment","_Fragment","initialShips","id","length","position","orientation","Game","gameState","nickname","_s","myShips","setMyShips","isPlacementValid","setIsPlacementValid","myPlayerId","players","Object","keys","find","me","validateBoard","allShips","placedShips","filter","s","allOccupiedCells","Set","ship","i","row","col","coord","has","add","gameStatus","ships","some","handleShipDrop","droppedShip","newPosition","tempShips","map","handleRotateShip","shipId","newOrientation","dropPalette","accept","SHIP","drop","item","handleConfirmPlacement","alert","allShipParts","forEach","push","emit","children","fileName","_jsxFileName","lineNumber","columnNumber","className","shipsOnBoard","shipsInPalette","onDropShip","onRotateShip","boardData","Array","fill","onCellClick","ref","onClick","disabled","_gameState$players$ga","opponentId","opponent","isMyTurn","currentPlayerTurn","myDisplayBoard","part","gameBoard","r_idx","cell","c_idx","handleFire","timer","score","winner","_c","$RefreshReg$"],"sources":["C:/Users/asus/battleship-client/src/components/GameBoard.js"],"sourcesContent":["// // src/components/GameBoard.js\r\n// import React from 'react';\r\n// import './GameBoard.css'; // ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå css ‡∏ô‡∏µ‡πâ‡∏ï‡πà‡∏≠‡πÑ‡∏õ\r\n\r\n// // Cell: Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á\r\n// const Cell = ({ value, onClick }) => {\r\n//   // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î className ‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á value (‡πÄ‡∏ä‡πà‡∏ô 'ship', 'hit', 'miss')\r\n//   const cellClass = `cell ${value}`; \r\n//   return <div className={cellClass} onClick={onClick}></div>;\r\n// };\r\n\r\n// // GameBoard: Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\r\n// const GameBoard = ({ board, onCellClick }) => {\r\n//   return (\r\n//     <div className=\"game-board\">\r\n//       {board.map((row, rowIndex) =>\r\n//         row.map((cellValue, colIndex) => (\r\n//           <Cell\r\n//             key={`${rowIndex}-${colIndex}`}\r\n//             value={cellValue}\r\n//             onClick={() => onCellClick(rowIndex, colIndex)}\r\n//           />\r\n//         ))\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default GameBoard;\r\n\r\n\r\n//v2\r\n// src/components/GameBoard.js\r\n// import React from 'react';\r\n// import { useDrop } from 'react-dnd';\r\n// import { ItemTypes } from './DraggableShip'; // import Type ‡∏°‡∏≤‡πÉ‡∏ä‡πâ\r\n// import './GameBoard.css';\r\n\r\n// const Cell = ({ value, onDrop, rowIndex, colIndex }) => {\r\n//   const [{ isOver }, drop] = useDrop(() => ({\r\n//     accept: ItemTypes.SHIP,\r\n//     // onDrop ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÄ‡∏£‡∏∑‡∏≠‡∏•‡∏á‡∏ö‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ\r\n//     drop: (item) => onDrop(item.id, { row: rowIndex, col: colIndex }),\r\n//     collect: (monitor) => ({\r\n//       isOver: !!monitor.isOver(), // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\r\n//     }),\r\n//   }));\r\n\r\n//   const cellClass = `cell ${value || ''} ${isOver ? 'drop-target' : ''}`;\r\n  \r\n//   // ref={drop} ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô Drop Target\r\n//   return <div ref={drop} className={cellClass}></div>;\r\n// };\r\n\r\n// // GameBoard: Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\r\n// const GameBoard = ({ board, onDropShip }) => {\r\n//   return (\r\n//     <div className=\"game-board\">\r\n//       {board.map((row, rowIndex) =>\r\n//         row.map((cellValue, colIndex) => (\r\n//           <Cell\r\n//             key={`${rowIndex}-${colIndex}`}\r\n//             value={cellValue}\r\n//             rowIndex={rowIndex}\r\n//             colIndex={colIndex}\r\n//             // ‡∏™‡πà‡∏á onDrop function ‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Cell\r\n//             onDrop={onDropShip || (() => {})}\r\n//           />\r\n//         ))\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default GameBoard;\r\n\r\n\r\n\r\n// //v3\r\n// // src/components/GameBoard.js\r\n// // src/components/GameBoard.js\r\n// import React from 'react';\r\n// import { useDrop } from 'react-dnd';\r\n// import { ItemTypes } from './DraggableShip';\r\n// import DraggableShip from './DraggableShip';\r\n// import './GameBoard.css';\r\n\r\n// // A simple cell component, it can now render hits/misses for the gameplay phase\r\n// const Cell = ({ value, onClick }) => {\r\n//     const cellClass = `cell ${value || ''}`;\r\n//     return <div className={cellClass} onClick={onClick}></div>;\r\n// };\r\n\r\n\r\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\r\n//   const [{ isOver }, drop] = useDrop(() => ({\r\n//     accept: ItemTypes.SHIP,\r\n//     drop: (item, monitor) => {\r\n//       const offset = monitor.getClientOffset();\r\n//       const boardElement = document.querySelector('.game-board');\r\n//       if (boardElement && onDropShip) {\r\n//         const rect = boardElement.getBoundingClientRect();\r\n//         // Calculate grid position from mouse coordinates\r\n//         const col = Math.round((offset.x - rect.left) / 42); // 40px width + 2px gap\r\n//         const row = Math.round((offset.y - rect.top) / 42); \r\n//         onDropShip(item, { row, col });\r\n//       }\r\n//     },\r\n//     collect: (monitor) => ({\r\n//       isOver: !!monitor.isOver(),\r\n//     }),\r\n//   }));\r\n\r\n//   return (\r\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\r\n//       {/* If boardData is provided (during gameplay), render it. Otherwise, render empty cells. */}\r\n//       {boardData ? (\r\n//          boardData.flat().map((cellValue, i) => (\r\n//             <Cell \r\n//                 key={i} \r\n//                 value={cellValue} \r\n//                 onClick={() => onCellClick(Math.floor(i / 8), i % 8)}\r\n//             />\r\n//          ))\r\n//       ) : (\r\n//         Array.from({ length: 64 }).map((_, i) => <Cell key={i} />)\r\n//       )}\r\n\r\n//       {/* Render ships that have been placed on the board */}\r\n//       {ships.map(ship => (\r\n//         <div\r\n//           key={ship.id}\r\n//           className=\"placed-ship\"\r\n//           style={{\r\n//             top: `${ship.position.row * 42}px`,\r\n//             left: `${ship.position.col * 42}px`,\r\n//           }}\r\n//         >\r\n//           <DraggableShip ship={ship} onRotate={onRotateShip} />\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default GameBoard;\r\n\r\n// 10/8/2025 18:00  shadow\r\n// src/components/GameBoard.js\r\n// src/components/GameBoard.js\r\n// src/components/GameBoard.js\r\n// src/components/GameBoard.js\r\n// import React, { useState } from 'react'; // <-- ‡πÄ‡∏û‡∏¥‡πà‡∏° useState\r\n// import { useDrop } from 'react-dnd';\r\n// import { ItemTypes } from './DraggableShip';\r\n// import DraggableShip from './DraggableShip';\r\n// import './GameBoard.css';\r\n\r\n// const Cell = ({ value, isHovered, onClick }) => {\r\n//     // ‡πÄ‡∏û‡∏¥‡πà‡∏° isHovered ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏á‡∏≤\r\n//     const cellClass = `cell ${value || ''} ${isHovered ? 'hover-preview' : ''}`;\r\n//     return <div className={cellClass} onClick={onClick}></div>;\r\n// };\r\n\r\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\r\n//   // State ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏≤‡∏Å‡πÄ‡∏£‡∏∑‡∏≠‡∏°‡∏≤‡∏ó‡∏±‡∏ö\r\n//   const [hoveredCells, setHoveredCells] = useState([]);\r\n\r\n//   const [{ isOver }, drop] = useDrop(() => ({\r\n//     accept: ItemTypes.SHIP,\r\n//     // hover: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ item ‡∏•‡∏≤‡∏Å‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ drop target\r\n//     hover: (item, monitor) => {\r\n//         const offset = monitor.getClientOffset();\r\n//         const boardElement = document.querySelector('.game-board');\r\n//         if (boardElement) {\r\n//             const rect = boardElement.getBoundingClientRect();\r\n//             const col = Math.floor((offset.x - rect.left) / 42);\r\n//             const row = Math.floor((offset.y - rect.top) / 42);\r\n\r\n//             const newHoveredCells = [];\r\n//             for (let i = 0; i < item.length; i++) {\r\n//                 const r = item.orientation === 'horizontal' ? row : row + i;\r\n//                 const c = item.orientation === 'horizontal' ? col + i : col;\r\n//                 if (r >= 0 && r < 8 && c >= 0 && c < 8) {\r\n//                     newHoveredCells.push({ r, c });\r\n//                 }\r\n//             }\r\n//             setHoveredCells(newHoveredCells);\r\n//         }\r\n//     },\r\n//     drop: (item, monitor) => {\r\n//       // ... ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô drop ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° ...\r\n//       setHoveredCells([]); // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏á‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à\r\n//       const offset = monitor.getClientOffset();\r\n//       const boardElement = document.querySelector('.game-board');\r\n//       if (boardElement && onDropShip) {\r\n//         const rect = boardElement.getBoundingClientRect();\r\n//         const col = Math.floor((offset.x - rect.left) / 42);\r\n//         const row = Math.floor((offset.y - rect.top) / 42);\r\n//         onDropShip(item, { row, col });\r\n//       }\r\n//     },\r\n//     // leave: ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏≤‡∏Å item ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å drop target\r\n//     leave: () => {\r\n//         setHoveredCells([]); // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏á‡∏≤\r\n//     },\r\n//     collect: (monitor) => ({ isOver: !!monitor.isOver() }),\r\n//   }));\r\n\r\n//   return (\r\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\r\n//       {boardData.flat().map((cellValue, i) => {\r\n//         const rowIndex = Math.floor(i / 8);\r\n//         const colIndex = i % 8;\r\n//         const isHovered = hoveredCells.some(cell => cell.r === rowIndex && cell.c === colIndex);\r\n//         return (\r\n//             <Cell\r\n//                 key={i}\r\n//                 value={cellValue}\r\n//                 isHovered={isHovered}\r\n//                 onClick={() => onCellClick(rowIndex, colIndex)}\r\n//             />\r\n//         )\r\n//       })}\r\n//       {ships.map(ship => (\r\n//         <div\r\n//           key={ship.id}\r\n//           className=\"placed-ship\"\r\n//           style={{ top: `${ship.position.row * 42}px`, left: `${ship.position.col * 42}px` }}\r\n//         >\r\n//           <DraggableShip ship={ship} onClick={onRotateShip} />\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default GameBoard;\r\n\r\n\r\n\r\n\r\n// src/components/Game.js// src/components/Game.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport { socket } from '../socket';\r\nimport GameBoard from './GameBoard';\r\nimport DraggableShip, { ItemTypes } from './DraggableShip';\r\nimport './Game.css';\r\n\r\nconst initialShips = [\r\n  { id: 1, length: 4, position: null, orientation: 'horizontal' },\r\n  { id: 2, length: 4, position: null, orientation: 'horizontal' },\r\n  { id: 3, length: 4, position: null, orientation: 'horizontal' },\r\n  { id: 4, length: 4, position: null, orientation: 'horizontal' },\r\n];\r\n\r\nfunction Game({ gameState, nickname }) {\r\n  const [myShips, setMyShips] = useState(initialShips);\r\n  const [isPlacementValid, setIsPlacementValid] = useState(false);\r\n\r\n  const myPlayerId = gameState?.players ? Object.keys(gameState.players).find(id => gameState.players[id].nickname === nickname) : null;\r\n  const me = myPlayerId ? gameState.players[myPlayerId] : null;\r\n\r\n  const validateBoard = (allShips) => {\r\n    const placedShips = allShips.filter(s => s.position);\r\n    if (placedShips.length !== 4) return false;\r\n\r\n    const allOccupiedCells = new Set();\r\n    for (const ship of placedShips) {\r\n      for (let i = 0; i < ship.length; i++) {\r\n        const row = ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i;\r\n        const col = ship.orientation === 'horizontal' ? ship.position.col : ship.position.col;\r\n        const coord = `${row},${col}`;\r\n\r\n        if (allOccupiedCells.has(coord) || row < 0 || row > 7 || col < 0 || col > 7) {\r\n            return false;\r\n        }\r\n        allOccupiedCells.add(coord);\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsPlacementValid(validateBoard(myShips));\r\n  }, [myShips]);\r\n\r\n  useEffect(() => {\r\n    if (gameState?.gameStatus === 'placing' && me?.ships.length === 0) {\r\n      if (!myShips.some(s => s.position !== null)) {\r\n        setMyShips(initialShips);\r\n      }\r\n    }\r\n    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏£‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°‡∏ñ‡∏π‡∏Å‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå\r\n    if (gameState?.gameStatus === 'waiting') {\r\n        setMyShips(initialShips);\r\n    }\r\n  }, [gameState, me]);\r\n\r\n  const handleShipDrop = (droppedShip, newPosition) => {\r\n      const tempShips = myShips.map(ship =>\r\n        ship.id === droppedShip.id\r\n          ? { ...ship, position: newPosition, orientation: droppedShip.orientation }\r\n          : ship\r\n      );\r\n      setMyShips(tempShips); // ‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß useEffect ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏á\r\n  };\r\n\r\n  const handleRotateShip = (shipId) => {\r\n    setMyShips(ships => ships.map(s => {\r\n      if (s.id === shipId) {\r\n        const newOrientation = s.orientation === 'horizontal' ? 'vertical' : 'horizontal';\r\n        return { ...s, orientation: newOrientation };\r\n      }\r\n      return s;\r\n    }));\r\n  };\r\n\r\n  const [, dropPalette] = useDrop(() => ({\r\n    accept: ItemTypes.SHIP,\r\n    drop: (item) => { setMyShips(ships => ships.map(s => s.id === item.id ? { ...s, position: null } : s)) },\r\n  }));\r\n\r\n  const handleConfirmPlacement = () => {\r\n    if (!isPlacementValid) {\r\n      alert('Invalid ship placement. Ships might be overlapping, outside the board, or not all ships are placed.');\r\n      return;\r\n    }\r\n    const allShipParts = [];\r\n    myShips.filter(s => s.position).forEach(ship => {\r\n      for (let i = 0; i < ship.length; i++) {\r\n        allShipParts.push({\r\n          row: ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i,\r\n          col: ship.orientation === 'horizontal' ? ship.position.col + i : ship.position.col,\r\n        });\r\n      }\r\n    });\r\n    socket.emit('place-ships', allShipParts);\r\n  };\r\n\r\n  if (!gameState || !me) return <div>Loading or connecting...</div>;\r\n\r\n  // --- ‡∏™‡πà‡∏ß‡∏ô RENDER ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô ---\r\n\r\n  // RENDER: WAITING ROOM\r\n  if (gameState.gameStatus === 'waiting') {\r\n    return (\r\n      <div className=\"waiting-room\">\r\n        <h2>Welcome, {nickname}!</h2>\r\n        <h3>Waiting for another player to join...</h3>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // RENDER: PLACEMENT PHASE\r\n  if (gameState.gameStatus === 'placing') {\r\n    if (me.ships.length > 0) {\r\n      return <h2>Waiting for opponent to place ships...</h2>;\r\n    }\r\n\r\n    const shipsOnBoard = myShips.filter(s => s.position !== null);\r\n    const shipsInPalette = myShips.filter(s => s.position === null);\r\n\r\n    return (\r\n      <div className=\"placement-container\">\r\n        <h3>Place Your Fleet (Click ship to rotate)</h3>\r\n        <GameBoard\r\n          ships={shipsOnBoard}\r\n          onDropShip={handleShipDrop}\r\n          onRotateShip={handleRotateShip}\r\n          boardData={Array(8).fill(Array(8).fill(null))}\r\n          onCellClick={() => {}}\r\n        />\r\n        <div className=\"ship-palette\" ref={dropPalette}>\r\n          {shipsInPalette.map(s => <DraggableShip key={s.id} ship={s} onClick={handleRotateShip} />)}\r\n        </div>\r\n        <button onClick={handleConfirmPlacement} disabled={!isPlacementValid}>\r\n          Confirm Placement\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // RENDER: PLAYING & GAME OVER PHASES\r\n  if (gameState.gameStatus === 'playing' || gameState.gameStatus === 'gameover') {\r\n    const opponentId = Object.keys(gameState.players).find(id => id !== myPlayerId);\r\n    const opponent = opponentId ? gameState.players[opponentId] : null;\r\n    const isMyTurn = gameState.currentPlayerTurn === myPlayerId;\r\n\r\n    const myDisplayBoard = Array(8).fill(null).map(() => Array(8).fill(null));\r\n    me.ships.forEach(part => { myDisplayBoard[part.row][part.col] = 'ship'; });\r\n    me.gameBoard.forEach((row, r_idx) => {\r\n      row.forEach((cell, c_idx) => {\r\n        if (cell) myDisplayBoard[r_idx][c_idx] = cell;\r\n      });\r\n    });\r\n\r\n    const handleFire = (row, col) => {\r\n      if (isMyTurn && gameState.gameStatus === 'playing' && !opponent.gameBoard[row][col]) {\r\n        socket.emit('fire-shot', { row, col });\r\n      }\r\n    };\r\n    \r\n    return (\r\n      <div className=\"playing-container\">\r\n        {gameState.gameStatus === 'playing' && (\r\n          <>\r\n            <div className=\"turn-indicator\">\r\n              <h2 className={isMyTurn ? 'my-turn' : ''}> {isMyTurn ? \"üî• Your Turn!\" : `Waiting for ${opponent?.nickname}'s turn...`} </h2>\r\n              <div className=\"timer\">Time Left: {gameState.timer}</div>\r\n            </div>\r\n            <div className=\"boards-container\">\r\n              <div className=\"board-area\">\r\n                <h3>Your Board (Score: {me.score})</h3>\r\n                <GameBoard ships={[]} boardData={myDisplayBoard} onCellClick={() => {}} />\r\n              </div>\r\n              <div className=\"board-area\">\r\n                <h3>{opponent?.nickname}'s Board (Score: {opponent?.score || 0})</h3>\r\n                {opponent ? <GameBoard ships={[]} onCellClick={handleFire} boardData={opponent.gameBoard} /> : <p>Waiting...</p>}\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n        {gameState.gameStatus === 'gameover' && ( <div className=\"game-over\"> <h1>Game Over!</h1> <h2>Winner is: {gameState.players[gameState.winner]?.nickname}</h2> </div> )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <div>Unhandled game state: {gameState.gameStatus}</div>;\r\n}\r\n\r\nexport default Game;"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAKA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,OAAO,QAAQ,WAAW;AACnC,SAASC,MAAM,QAAQ,WAAW;AAClC,OA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}