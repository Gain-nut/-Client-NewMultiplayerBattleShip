{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\battleship-client\\\\src\\\\components\\\\Game.js\",\n  _s = $RefreshSig$();\n// // src/components/Game.js\n// import React, { useState } from 'react';\n// import { socket } from '../socket';\n// import GameBoard from './GameBoard';\n// import './Game.css';\n\n// function Game({ gameState, nickname }) {\n//   // State ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏ß‡∏≤‡∏á (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Client ‡∏ô‡∏µ‡πâ)\n//   const [myShips, setMyShips] = useState([]);\n//   const totalShipParts = 16; // 4 ‡∏•‡∏≥ * 4 ‡∏ä‡πà‡∏≠‡∏á = 16 ‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô\n\n//   // --- 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô ---\n//   if (!gameState || !gameState.players) {\n//     return <div>Loading game...</div>;\n//   }\n\n//   const playerIds = Object.keys(gameState.players);\n//   const myPlayerId = playerIds.find(id => gameState.players[id].nickname === nickname);\n//   const opponentId = playerIds.find(id => id !== myPlayerId);\n\n//   const me = gameState.players[myPlayerId];\n//   const opponent = opponentId ? gameState.players[opponentId] : null;\n\n//   if (!me) return <div>Initializing...</div>;\n\n//   const isMyTurn = gameState.currentPlayerTurn === myPlayerId;\n\n//   // --- 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Event ---\n//   const handlePlacementClick = (row, col) => {\n//     if (myShips.length < totalShipParts) {\n//       const newPart = { row, col };\n//       if (!myShips.some(part => part.row === row && part.col === col)) {\n//         setMyShips([...myShips, newPart]);\n//       }\n//     }\n//   };\n\n//   const handleConfirmPlacement = () => {\n//     if (myShips.length === totalShipParts) {\n//       socket.emit('place-ships', myShips);\n//     } else {\n//       alert(`Please place all ${totalShipParts} ship parts.`);\n//     }\n//   };\n\n//   const handleFire = (row, col) => {\n//     if (isMyTurn && gameState.gameStatus === 'playing') {\n//       socket.emit('fire-shot', { row, col });\n//     }\n//   };\n\n//   // --- 3. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• Board ---\n//   const myDisplayBoard = Array(8).fill(null).map(() => Array(8).fill(null));\n//   // ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å\n//   if (gameState.gameStatus === 'placing') {\n//     myShips.forEach(part => { myDisplayBoard[part.row][part.col] = 'ship'; });\n//   } \n//   // ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á + ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π\n//   else {\n//     me.ships.forEach(ship => { myDisplayBoard[ship.row][ship.col] = 'ship'; });\n//     me.gameBoard.forEach((row, r_idx) => {\n//       row.forEach((cell, c_idx) => {\n//         if (cell === 'hit' || cell === 'miss') {\n//           myDisplayBoard[r_idx][c_idx] = cell;\n//         }\n//       });\n//     });\n//   }\n\n//   // --- 4. Render Component ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏° ---\n//   return (\n//     <div className=\"game-container\">\n//       {/* ===== ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠ (Placing) ===== */}\n//       {gameState.gameStatus === 'placing' && (\n//         <div>\n//           {me.ships.length === 0 ? (\n//             <>\n//               <h3>Place Your Ships ({myShips.length} / {totalShipParts} parts)</h3>\n//               <GameBoard board={myDisplayBoard} onCellClick={handlePlacementClick} />\n//               <button onClick={handleConfirmPlacement} disabled={myShips.length !== totalShipParts}>\n//                 Confirm Placement\n//               </button>\n//             </>\n//           ) : (\n//             <h2>Waiting for {opponent?.nickname || 'opponent'} to place ships...</h2>\n//           )}\n//         </div>\n//       )}\n\n//       {/* ===== ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô (Playing) ===== */}\n//       {gameState.gameStatus === 'playing' && (\n//         <>\n//           <div className=\"turn-indicator\">\n//             <h2 className={isMyTurn ? 'my-turn' : ''}>\n//               {isMyTurn ? \"üî• Your Turn!\" : `Waiting for ${opponent?.nickname}'s turn...`}\n//             </h2>\n//           </div>\n//           <div className=\"boards-container\">\n//             <div className=\"board-area\">\n//               <h3>Your Board (Score: {me.score})</h3>\n//               <GameBoard board={myDisplayBoard} onCellClick={() => {}} />\n//             </div>\n//             <div className=\"board-area\">\n//               <h3>{opponent?.nickname}'s Board (Score: {opponent?.score || 0})</h3>\n//               {opponent ? (\n//                 <GameBoard board={opponent.gameBoard} onCellClick={handleFire} />\n//               ) : (\n//                 <p>Waiting for opponent...</p>\n//               )}\n//             </div>\n//           </div>\n//         </>\n//       )}\n\n//       {/* ===== ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß (Game Over) ===== */}\n//       {gameState.gameStatus === 'gameover' && (\n//         <div className=\"game-over\">\n//           <h1>Game Over!</h1>\n//           <h2>Winner is: {gameState.players[gameState.winner]?.nickname || 'Someone'}</h2>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n// export default Game;\n\n// // src/components/Game.js\n// import React, { useState } from 'react';\n// import { useDrop } from 'react-dnd';\n// import { socket } from '../socket';\n// import GameBoard from './GameBoard';\n// import DraggableShip, { ItemTypes } from './DraggableShip';\n// import './Game.css';\n\n// // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô\n// const initialShips = [\n//   { id: 1, length: 4, position: null, orientation: 'horizontal' },\n//   { id: 2, length: 4, position: null, orientation: 'horizontal' },\n//   { id: 3, length: 4, position: null, orientation: 'horizontal' },\n//   { id: 4, length: 4, position: null, orientation: 'horizontal' },\n// ];\n\n// function Game({ gameState, nickname }) {\n//   const [myShips, setMyShips] = useState(initialShips);\n//   const [shipOrientation, setShipOrientation] = useState('horizontal');\n\n//   // --- Logic ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠ (Drop) ---\n//   const moveShip = (shipId, newPosition) => {\n//     setMyShips((prevShips) =>\n//       prevShips.map((ship) =>\n//         ship.id === shipId\n//           ? { ...ship, position: newPosition, orientation: shipOrientation }\n//           : ship\n//       )\n//     );\n//   };\n\n//   const [, drop] = useDrop(() => ({\n//     accept: ItemTypes.SHIP,\n//     drop: (item, monitor) => {\n//       // Logic ‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏ô GameBoard ‡πÅ‡∏ó‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô\n//     },\n//   }));\n\n//   // --- Logic ‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏ï‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ---\n//   if (!gameState || !gameState.players) return <div>Loading...</div>;\n\n//   const playerIds = Object.keys(gameState.players);\n//   const myPlayerId = playerIds.find(id => gameState.players[id].nickname === nickname);\n//   if (!myPlayerId) return <div>Initializing...</div>;\n\n//   const me = gameState.players[myPlayerId];\n//   const opponentId = playerIds.find(id => id !== myPlayerId);\n//   const opponent = opponentId ? gameState.players[opponentId] : null;\n\n//   const isMyTurn = gameState.currentPlayerTurn === myPlayerId;\n\n//   // --- ‡∏™‡∏£‡πâ‡∏≤‡∏á Array ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ Server ---\n//   const handleConfirmPlacement = () => {\n//     const allShipParts = [];\n//     myShips.forEach(ship => {\n//       if (ship.position) {\n//         for (let i = 0; i < ship.length; i++) {\n//           const part = {\n//             row: ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i,\n//             col: ship.orientation === 'horizontal' ? ship.position.col + i : ship.position.col,\n//           };\n//           allShipParts.push(part);\n//         }\n//       }\n//     });\n\n//     if (allShipParts.length === 16) {\n//         socket.emit('place-ships', allShipParts);\n//     } else {\n//         alert('Please place all 4 ships on the board.');\n//     }\n//   };\n\n//   const handleFire = (row, col) => {\n//     if (isMyTurn && gameState.gameStatus === 'playing') {\n//       socket.emit('fire-shot', { row, col });\n//     }\n//   };\n\n//   // --- ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Board ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• ---\n//   const placementBoard = Array(8).fill(null).map(() => Array(8).fill(null));\n//   myShips.forEach(ship => {\n//     if (ship.position) {\n//       for (let i = 0; i < ship.length; i++) {\n//         const row = ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i;\n//         const col = ship.orientation === 'horizontal' ? ship.position.col + i : ship.position.col;\n//         if (row < 8 && col < 8) {\n//           placementBoard[row][col] = 'ship';\n//         }\n//       }\n//     }\n//   });\n\n//   // -- ‡∏™‡πà‡∏ß‡∏ô Render --\n//   return (\n//     <div className=\"game-container\" ref={drop}>\n//       {gameState.gameStatus === 'placing' && (\n//         <div className=\"placement-container\">\n//           {me.ships.length === 0 ? (\n//             <>\n//               <h3>Place Your Fleet</h3>\n//               <GameBoard board={placementBoard} onDropShip={moveShip} />\n//               <div className=\"ship-palette\">\n//                 <div className=\"ships-to-drag\">\n//                     {myShips.filter(s => s.position === null).map(s => <DraggableShip key={s.id} ship={s} />)}\n//                 </div>\n//                 <button onClick={() => setShipOrientation(o => o === 'horizontal' ? 'vertical' : 'horizontal')}>\n//                   Rotate (Now: {shipOrientation})\n//                 </button>\n//               </div>\n//               <button onClick={handleConfirmPlacement}>Confirm Placement</button>\n//             </>\n//           ) : (\n//             <h2>Waiting for opponent...</h2>\n//           )}\n//         </div>\n//       )}\n\n//       {/* --- ‡∏™‡πà‡∏ß‡∏ô Playing ‡πÅ‡∏•‡∏∞ Game Over (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) --- */}\n//       {gameState.gameStatus === 'playing' && (\n//         <>\n//             {/* ... ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô Playing ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß ... */}\n//         </>\n//       )}\n//       {gameState.gameStatus === 'gameover' && (\n//         <>\n//             {/* ... ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô Game Over ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß ... */}\n//         </>\n//       )}\n//     </div>\n//   );\n// }\n\n// export default Game;\n\n//v \n// src/components/Game.js\nimport React, { useState } from 'react';\nimport { socket } from '../socket';\nimport GameBoard from './GameBoard';\nimport DraggableShip from './DraggableShip';\nimport './Game.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialShips = [{\n  id: 1,\n  length: 4,\n  position: null,\n  orientation: 'horizontal'\n}, {\n  id: 2,\n  length: 4,\n  position: null,\n  orientation: 'horizontal'\n}, {\n  id: 3,\n  length: 4,\n  position: null,\n  orientation: 'horizontal'\n}, {\n  id: 4,\n  length: 4,\n  position: null,\n  orientation: 'horizontal'\n}];\nfunction Game({\n  gameState,\n  nickname\n}) {\n  _s();\n  const [myShips, setMyShips] = useState(initialShips);\n\n  // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î) ---\n  const canPlaceShip = (shipToPlace, newPosition, newOrientation) => {\n    const {\n      length\n    } = shipToPlace;\n    const {\n      row,\n      col\n    } = newPosition;\n\n    // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏•‡πâ‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n    if (newOrientation === 'horizontal') {\n      if (col + length > 8) return false;\n    } else {\n      // vertical\n      if (row + length > 8) return false;\n    }\n\n    // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡∏≠‡∏•‡∏≥‡∏≠‡∏∑‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n    const newParts = Array.from({\n      length\n    }).map((_, i) => ({\n      row: newOrientation === 'horizontal' ? row : row + i,\n      col: newOrientation === 'horizontal' ? col + i : col\n    }));\n    const otherShips = myShips.filter(s => s.id !== shipToPlace.id && s.position);\n    for (const otherShip of otherShips) {\n      const otherParts = Array.from({\n        length: otherShip.length\n      }).map((_, i) => ({\n        row: otherShip.orientation === 'horizontal' ? otherShip.position.row : otherShip.position.row + i,\n        col: otherShip.orientation === 'horizontal' ? otherShip.position.col + i : otherShip.position.col\n      }));\n      for (const newPart of newParts) {\n        if (otherParts.some(p => p.row === newPart.row && p.col === newPart.col)) {\n          return false; // ‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô\n        }\n      }\n    }\n    return true; // ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏≤‡∏á‡πÑ‡∏î‡πâ\n  };\n  const handleShipDrop = (ship, newPosition) => {\n    if (canPlaceShip(ship, newPosition, ship.orientation)) {\n      setMyShips(ships => ships.map(s => s.id === ship.id ? {\n        ...s,\n        position: newPosition\n      } : s));\n    }\n  };\n  const handleRotateShip = shipId => {\n    setMyShips(ships => ships.map(s => {\n      if (s.id === shipId) {\n        const newOrientation = s.orientation === 'horizontal' ? 'vertical' : 'horizontal';\n        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n        if (s.position && !canPlaceShip(s, s.position, newOrientation)) {\n          return s; // ‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°\n        }\n        return {\n          ...s,\n          orientation: newOrientation\n        };\n      }\n      return s;\n    }));\n  };\n  const handleConfirmPlacement = () => {\n    const placedShips = myShips.filter(s => s.position);\n    if (placedShips.length !== 4) {\n      alert('Please place all 4 ships on the board.');\n      return;\n    }\n    const allShipParts = [];\n    placedShips.forEach(ship => {\n      for (let i = 0; i < ship.length; i++) {\n        allShipParts.push({\n          row: ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i,\n          col: ship.orientation === 'horizontal' ? ship.position.col + i : ship.position.col\n        });\n      }\n    });\n    socket.emit('place-ships', allShipParts);\n  };\n\n  // --- ‡∏™‡πà‡∏ß‡∏ô Logic ‡πÄ‡∏î‡∏¥‡∏° (‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô, ‡∏¢‡∏¥‡∏á, ‡∏Ø‡∏•‡∏Ø) ---\n  if (!gameState || !gameState.players) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 360,\n    columnNumber: 48\n  }, this);\n  const playerIds = Object.keys(gameState.players);\n  const myPlayerId = playerIds.find(id => gameState.players[id].nickname === nickname);\n  if (!myPlayerId) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Initializing...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 363,\n    columnNumber: 27\n  }, this);\n  const me = gameState.players[myPlayerId];\n\n  // --- ‡∏™‡πà‡∏ß‡∏ô Render ---\n  const shipsInPalette = myShips.filter(s => s.position === null);\n  const shipsOnBoard = myShips.filter(s => s.position !== null);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-container\",\n    children: [gameState.gameStatus === 'placing' && me.ships.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"placement-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Place Your Fleet (Right-click to rotate)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(GameBoard, {\n        ships: shipsOnBoard,\n        onDropShip: handleShipDrop,\n        onRotateShip: handleRotateShip\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ship-palette\",\n        children: shipsInPalette.length > 0 ? shipsInPalette.map(s => /*#__PURE__*/_jsxDEV(DraggableShip, {\n          ship: s,\n          onRotate: handleRotateShip\n        }, s.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 41\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"All ships placed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleConfirmPlacement,\n        children: \"Confirm Placement\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }, this), gameState.gameStatus === 'placing' && me.ships.length > 0 && /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Waiting for opponent...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 11\n    }, this), gameState.gameStatus !== 'placing' && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"... \\u0E42\\u0E04\\u0E49\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E40\\u0E25\\u0E48\\u0E19\\u0E40\\u0E01\\u0E21\\u0E41\\u0E25\\u0E30\\u0E08\\u0E1A\\u0E40\\u0E01\\u0E21\\u0E02\\u0E2D\\u0E07\\u0E04\\u0E38\\u0E13\\u0E08\\u0E30\\u0E2D\\u0E22\\u0E39\\u0E48\\u0E17\\u0E35\\u0E48\\u0E19\\u0E35\\u0E48 ...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 371,\n    columnNumber: 5\n  }, this);\n}\n_s(Game, \"SpadCKZ+90pgrpf04xCCyDZyDY4=\");\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useState","socket","GameBoard","DraggableShip","jsxDEV","_jsxDEV","initialShips","id","length","position","orientation","Game","gameState","nickname","_s","myShips","setMyShips","canPlaceShip","shipToPlace","newPosition","newOrientation","row","col","newParts","Array","from","map","_","i","otherShips","filter","s","otherShip","otherParts","newPart","some","p","handleShipDrop","ship","ships","handleRotateShip","shipId","handleConfirmPlacement","placedShips","alert","allShipParts","forEach","push","emit","players","children","fileName","_jsxFileName","lineNumber","columnNumber","playerIds","Object","keys","myPlayerId","find","me","shipsInPalette","shipsOnBoard","className","gameStatus","onDropShip","onRotateShip","onRotate","onClick","_c","$RefreshReg$"],"sources":["C:/Users/asus/battleship-client/src/components/Game.js"],"sourcesContent":["// // src/components/Game.js\r\n// import React, { useState } from 'react';\r\n// import { socket } from '../socket';\r\n// import GameBoard from './GameBoard';\r\n// import './Game.css';\r\n\r\n// function Game({ gameState, nickname }) {\r\n//   // State ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏ß‡∏≤‡∏á (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Client ‡∏ô‡∏µ‡πâ)\r\n//   const [myShips, setMyShips] = useState([]);\r\n//   const totalShipParts = 16; // 4 ‡∏•‡∏≥ * 4 ‡∏ä‡πà‡∏≠‡∏á = 16 ‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô\r\n\r\n//   // --- 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô ---\r\n//   if (!gameState || !gameState.players) {\r\n//     return <div>Loading game...</div>;\r\n//   }\r\n\r\n//   const playerIds = Object.keys(gameState.players);\r\n//   const myPlayerId = playerIds.find(id => gameState.players[id].nickname === nickname);\r\n//   const opponentId = playerIds.find(id => id !== myPlayerId);\r\n\r\n//   const me = gameState.players[myPlayerId];\r\n//   const opponent = opponentId ? gameState.players[opponentId] : null;\r\n\r\n//   if (!me) return <div>Initializing...</div>;\r\n\r\n//   const isMyTurn = gameState.currentPlayerTurn === myPlayerId;\r\n\r\n//   // --- 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Event ---\r\n//   const handlePlacementClick = (row, col) => {\r\n//     if (myShips.length < totalShipParts) {\r\n//       const newPart = { row, col };\r\n//       if (!myShips.some(part => part.row === row && part.col === col)) {\r\n//         setMyShips([...myShips, newPart]);\r\n//       }\r\n//     }\r\n//   };\r\n\r\n//   const handleConfirmPlacement = () => {\r\n//     if (myShips.length === totalShipParts) {\r\n//       socket.emit('place-ships', myShips);\r\n//     } else {\r\n//       alert(`Please place all ${totalShipParts} ship parts.`);\r\n//     }\r\n//   };\r\n\r\n//   const handleFire = (row, col) => {\r\n//     if (isMyTurn && gameState.gameStatus === 'playing') {\r\n//       socket.emit('fire-shot', { row, col });\r\n//     }\r\n//   };\r\n\r\n//   // --- 3. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• Board ---\r\n//   const myDisplayBoard = Array(8).fill(null).map(() => Array(8).fill(null));\r\n//   // ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å\r\n//   if (gameState.gameStatus === 'placing') {\r\n//     myShips.forEach(part => { myDisplayBoard[part.row][part.col] = 'ship'; });\r\n//   } \r\n//   // ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á + ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π\r\n//   else {\r\n//     me.ships.forEach(ship => { myDisplayBoard[ship.row][ship.col] = 'ship'; });\r\n//     me.gameBoard.forEach((row, r_idx) => {\r\n//       row.forEach((cell, c_idx) => {\r\n//         if (cell === 'hit' || cell === 'miss') {\r\n//           myDisplayBoard[r_idx][c_idx] = cell;\r\n//         }\r\n//       });\r\n//     });\r\n//   }\r\n\r\n//   // --- 4. Render Component ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏° ---\r\n//   return (\r\n//     <div className=\"game-container\">\r\n//       {/* ===== ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠ (Placing) ===== */}\r\n//       {gameState.gameStatus === 'placing' && (\r\n//         <div>\r\n//           {me.ships.length === 0 ? (\r\n//             <>\r\n//               <h3>Place Your Ships ({myShips.length} / {totalShipParts} parts)</h3>\r\n//               <GameBoard board={myDisplayBoard} onCellClick={handlePlacementClick} />\r\n//               <button onClick={handleConfirmPlacement} disabled={myShips.length !== totalShipParts}>\r\n//                 Confirm Placement\r\n//               </button>\r\n//             </>\r\n//           ) : (\r\n//             <h2>Waiting for {opponent?.nickname || 'opponent'} to place ships...</h2>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* ===== ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô (Playing) ===== */}\r\n//       {gameState.gameStatus === 'playing' && (\r\n//         <>\r\n//           <div className=\"turn-indicator\">\r\n//             <h2 className={isMyTurn ? 'my-turn' : ''}>\r\n//               {isMyTurn ? \"üî• Your Turn!\" : `Waiting for ${opponent?.nickname}'s turn...`}\r\n//             </h2>\r\n//           </div>\r\n//           <div className=\"boards-container\">\r\n//             <div className=\"board-area\">\r\n//               <h3>Your Board (Score: {me.score})</h3>\r\n//               <GameBoard board={myDisplayBoard} onCellClick={() => {}} />\r\n//             </div>\r\n//             <div className=\"board-area\">\r\n//               <h3>{opponent?.nickname}'s Board (Score: {opponent?.score || 0})</h3>\r\n//               {opponent ? (\r\n//                 <GameBoard board={opponent.gameBoard} onCellClick={handleFire} />\r\n//               ) : (\r\n//                 <p>Waiting for opponent...</p>\r\n//               )}\r\n//             </div>\r\n//           </div>\r\n//         </>\r\n//       )}\r\n\r\n//       {/* ===== ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß (Game Over) ===== */}\r\n//       {gameState.gameStatus === 'gameover' && (\r\n//         <div className=\"game-over\">\r\n//           <h1>Game Over!</h1>\r\n//           <h2>Winner is: {gameState.players[gameState.winner]?.nickname || 'Someone'}</h2>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Game;\r\n\r\n\r\n// // src/components/Game.js\r\n// import React, { useState } from 'react';\r\n// import { useDrop } from 'react-dnd';\r\n// import { socket } from '../socket';\r\n// import GameBoard from './GameBoard';\r\n// import DraggableShip, { ItemTypes } from './DraggableShip';\r\n// import './Game.css';\r\n\r\n// // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô\r\n// const initialShips = [\r\n//   { id: 1, length: 4, position: null, orientation: 'horizontal' },\r\n//   { id: 2, length: 4, position: null, orientation: 'horizontal' },\r\n//   { id: 3, length: 4, position: null, orientation: 'horizontal' },\r\n//   { id: 4, length: 4, position: null, orientation: 'horizontal' },\r\n// ];\r\n\r\n// function Game({ gameState, nickname }) {\r\n//   const [myShips, setMyShips] = useState(initialShips);\r\n//   const [shipOrientation, setShipOrientation] = useState('horizontal');\r\n\r\n//   // --- Logic ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠ (Drop) ---\r\n//   const moveShip = (shipId, newPosition) => {\r\n//     setMyShips((prevShips) =>\r\n//       prevShips.map((ship) =>\r\n//         ship.id === shipId\r\n//           ? { ...ship, position: newPosition, orientation: shipOrientation }\r\n//           : ship\r\n//       )\r\n//     );\r\n//   };\r\n\r\n//   const [, drop] = useDrop(() => ({\r\n//     accept: ItemTypes.SHIP,\r\n//     drop: (item, monitor) => {\r\n//       // Logic ‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏ô GameBoard ‡πÅ‡∏ó‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô\r\n//     },\r\n//   }));\r\n\r\n\r\n//   // --- Logic ‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏ï‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ---\r\n//   if (!gameState || !gameState.players) return <div>Loading...</div>;\r\n\r\n//   const playerIds = Object.keys(gameState.players);\r\n//   const myPlayerId = playerIds.find(id => gameState.players[id].nickname === nickname);\r\n//   if (!myPlayerId) return <div>Initializing...</div>;\r\n\r\n//   const me = gameState.players[myPlayerId];\r\n//   const opponentId = playerIds.find(id => id !== myPlayerId);\r\n//   const opponent = opponentId ? gameState.players[opponentId] : null;\r\n\r\n//   const isMyTurn = gameState.currentPlayerTurn === myPlayerId;\r\n\r\n//   // --- ‡∏™‡∏£‡πâ‡∏≤‡∏á Array ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ Server ---\r\n//   const handleConfirmPlacement = () => {\r\n//     const allShipParts = [];\r\n//     myShips.forEach(ship => {\r\n//       if (ship.position) {\r\n//         for (let i = 0; i < ship.length; i++) {\r\n//           const part = {\r\n//             row: ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i,\r\n//             col: ship.orientation === 'horizontal' ? ship.position.col + i : ship.position.col,\r\n//           };\r\n//           allShipParts.push(part);\r\n//         }\r\n//       }\r\n//     });\r\n\r\n//     if (allShipParts.length === 16) {\r\n//         socket.emit('place-ships', allShipParts);\r\n//     } else {\r\n//         alert('Please place all 4 ships on the board.');\r\n//     }\r\n//   };\r\n\r\n//   const handleFire = (row, col) => {\r\n//     if (isMyTurn && gameState.gameStatus === 'playing') {\r\n//       socket.emit('fire-shot', { row, col });\r\n//     }\r\n//   };\r\n  \r\n//   // --- ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Board ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• ---\r\n//   const placementBoard = Array(8).fill(null).map(() => Array(8).fill(null));\r\n//   myShips.forEach(ship => {\r\n//     if (ship.position) {\r\n//       for (let i = 0; i < ship.length; i++) {\r\n//         const row = ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i;\r\n//         const col = ship.orientation === 'horizontal' ? ship.position.col + i : ship.position.col;\r\n//         if (row < 8 && col < 8) {\r\n//           placementBoard[row][col] = 'ship';\r\n//         }\r\n//       }\r\n//     }\r\n//   });\r\n  \r\n//   // -- ‡∏™‡πà‡∏ß‡∏ô Render --\r\n//   return (\r\n//     <div className=\"game-container\" ref={drop}>\r\n//       {gameState.gameStatus === 'placing' && (\r\n//         <div className=\"placement-container\">\r\n//           {me.ships.length === 0 ? (\r\n//             <>\r\n//               <h3>Place Your Fleet</h3>\r\n//               <GameBoard board={placementBoard} onDropShip={moveShip} />\r\n//               <div className=\"ship-palette\">\r\n//                 <div className=\"ships-to-drag\">\r\n//                     {myShips.filter(s => s.position === null).map(s => <DraggableShip key={s.id} ship={s} />)}\r\n//                 </div>\r\n//                 <button onClick={() => setShipOrientation(o => o === 'horizontal' ? 'vertical' : 'horizontal')}>\r\n//                   Rotate (Now: {shipOrientation})\r\n//                 </button>\r\n//               </div>\r\n//               <button onClick={handleConfirmPlacement}>Confirm Placement</button>\r\n//             </>\r\n//           ) : (\r\n//             <h2>Waiting for opponent...</h2>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* --- ‡∏™‡πà‡∏ß‡∏ô Playing ‡πÅ‡∏•‡∏∞ Game Over (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) --- */}\r\n//       {gameState.gameStatus === 'playing' && (\r\n//         <>\r\n//             {/* ... ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô Playing ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß ... */}\r\n//         </>\r\n//       )}\r\n//       {gameState.gameStatus === 'gameover' && (\r\n//         <>\r\n//             {/* ... ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô Game Over ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß ... */}\r\n//         </>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Game;\r\n\r\n\r\n\r\n\r\n\r\n//v \r\n// src/components/Game.js\r\nimport React, { useState } from 'react';\r\nimport { socket } from '../socket';\r\nimport GameBoard from './GameBoard';\r\nimport DraggableShip from './DraggableShip';\r\nimport './Game.css';\r\n\r\nconst initialShips = [\r\n  { id: 1, length: 4, position: null, orientation: 'horizontal' },\r\n  { id: 2, length: 4, position: null, orientation: 'horizontal' },\r\n  { id: 3, length: 4, position: null, orientation: 'horizontal' },\r\n  { id: 4, length: 4, position: null, orientation: 'horizontal' },\r\n];\r\n\r\nfunction Game({ gameState, nickname }) {\r\n  const [myShips, setMyShips] = useState(initialShips);\r\n  \r\n  // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡∏≠ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î) ---\r\n  const canPlaceShip = (shipToPlace, newPosition, newOrientation) => {\r\n    const { length } = shipToPlace;\r\n    const { row, col } = newPosition;\r\n\r\n    // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏•‡πâ‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\r\n    if (newOrientation === 'horizontal') {\r\n      if (col + length > 8) return false;\r\n    } else { // vertical\r\n      if (row + length > 8) return false;\r\n    }\r\n\r\n    // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡∏≠‡∏•‡∏≥‡∏≠‡∏∑‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\r\n    const newParts = Array.from({ length }).map((_, i) => ({\r\n      row: newOrientation === 'horizontal' ? row : row + i,\r\n      col: newOrientation === 'horizontal' ? col + i : col,\r\n    }));\r\n\r\n    const otherShips = myShips.filter(s => s.id !== shipToPlace.id && s.position);\r\n    for (const otherShip of otherShips) {\r\n      const otherParts = Array.from({ length: otherShip.length }).map((_, i) => ({\r\n        row: otherShip.orientation === 'horizontal' ? otherShip.position.row : otherShip.position.row + i,\r\n        col: otherShip.orientation === 'horizontal' ? otherShip.position.col + i : otherShip.position.col,\r\n      }));\r\n      \r\n      for (const newPart of newParts) {\r\n        if (otherParts.some(p => p.row === newPart.row && p.col === newPart.col)) {\r\n          return false; // ‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô\r\n        }\r\n      }\r\n    }\r\n    return true; // ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏≤‡∏á‡πÑ‡∏î‡πâ\r\n  };\r\n\r\n  const handleShipDrop = (ship, newPosition) => {\r\n    if (canPlaceShip(ship, newPosition, ship.orientation)) {\r\n      setMyShips(ships => ships.map(s => s.id === ship.id ? { ...s, position: newPosition } : s));\r\n    }\r\n  };\r\n\r\n  const handleRotateShip = (shipId) => {\r\n    setMyShips(ships => ships.map(s => {\r\n      if (s.id === shipId) {\r\n        const newOrientation = s.orientation === 'horizontal' ? 'vertical' : 'horizontal';\r\n        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\r\n        if (s.position && !canPlaceShip(s, s.position, newOrientation)) {\r\n          return s; // ‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°\r\n        }\r\n        return { ...s, orientation: newOrientation };\r\n      }\r\n      return s;\r\n    }));\r\n  };\r\n\r\n  const handleConfirmPlacement = () => {\r\n    const placedShips = myShips.filter(s => s.position);\r\n    if (placedShips.length !== 4) {\r\n      alert('Please place all 4 ships on the board.');\r\n      return;\r\n    }\r\n    const allShipParts = [];\r\n    placedShips.forEach(ship => {\r\n        for (let i = 0; i < ship.length; i++) {\r\n            allShipParts.push({\r\n            row: ship.orientation === 'horizontal' ? ship.position.row : ship.position.row + i,\r\n            col: ship.orientation === 'horizontal' ? ship.position.col + i : ship.position.col,\r\n            });\r\n        }\r\n    });\r\n    socket.emit('place-ships', allShipParts);\r\n  };\r\n  \r\n  // --- ‡∏™‡πà‡∏ß‡∏ô Logic ‡πÄ‡∏î‡∏¥‡∏° (‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô, ‡∏¢‡∏¥‡∏á, ‡∏Ø‡∏•‡∏Ø) ---\r\n  if (!gameState || !gameState.players) return <div>Loading...</div>;\r\n  const playerIds = Object.keys(gameState.players);\r\n  const myPlayerId = playerIds.find(id => gameState.players[id].nickname === nickname);\r\n  if (!myPlayerId) return <div>Initializing...</div>;\r\n  const me = gameState.players[myPlayerId];\r\n  \r\n  // --- ‡∏™‡πà‡∏ß‡∏ô Render ---\r\n  const shipsInPalette = myShips.filter(s => s.position === null);\r\n  const shipsOnBoard = myShips.filter(s => s.position !== null);\r\n\r\n  return (\r\n    <div className=\"game-container\">\r\n      {gameState.gameStatus === 'placing' && me.ships.length === 0 && (\r\n        <div className=\"placement-container\">\r\n          <h3>Place Your Fleet (Right-click to rotate)</h3>\r\n          <GameBoard ships={shipsOnBoard} onDropShip={handleShipDrop} onRotateShip={handleRotateShip} />\r\n          <div className=\"ship-palette\">\r\n            {shipsInPalette.length > 0 ? (\r\n                shipsInPalette.map(s => <DraggableShip key={s.id} ship={s} onRotate={handleRotateShip} />)\r\n            ) : (\r\n                <p>All ships placed.</p>\r\n            )}\r\n          </div>\r\n          <button onClick={handleConfirmPlacement}>Confirm Placement</button>\r\n        </div>\r\n      )}\r\n\r\n      {gameState.gameStatus === 'placing' && me.ships.length > 0 && (\r\n          <h2>Waiting for opponent...</h2>\r\n      )}\r\n\r\n      {/* --- ‡∏™‡πà‡∏ß‡∏ô Playing ‡πÅ‡∏•‡∏∞ Game Over (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£) --- */}\r\n      {gameState.gameStatus !== 'placing' && (\r\n        <div>... ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡∏∞‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ...</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Game;"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAMA;AACA;AA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}