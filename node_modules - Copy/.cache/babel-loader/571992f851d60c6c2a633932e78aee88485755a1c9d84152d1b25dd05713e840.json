{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\battleship-client\\\\src\\\\components\\\\GameBoard.js\",\n  _s = $RefreshSig$();\n// // src/components/GameBoard.js\n// import React from 'react';\n// import './GameBoard.css'; // เราจะสร้างไฟล์ css นี้ต่อไป\n\n// // Cell: Component สำหรับแต่ละช่องในตาราง\n// const Cell = ({ value, onClick }) => {\n//   // กำหนด className ตามค่าของ value (เช่น 'ship', 'hit', 'miss')\n//   const cellClass = `cell ${value}`; \n//   return <div className={cellClass} onClick={onClick}></div>;\n// };\n\n// // GameBoard: Component สำหรับตารางเกมทั้งหมด\n// const GameBoard = ({ board, onCellClick }) => {\n//   return (\n//     <div className=\"game-board\">\n//       {board.map((row, rowIndex) =>\n//         row.map((cellValue, colIndex) => (\n//           <Cell\n//             key={`${rowIndex}-${colIndex}`}\n//             value={cellValue}\n//             onClick={() => onCellClick(rowIndex, colIndex)}\n//           />\n//         ))\n//       )}\n//     </div>\n//   );\n// };\n\n// export default GameBoard;\n\n//v2\n// src/components/GameBoard.js\n// import React from 'react';\n// import { useDrop } from 'react-dnd';\n// import { ItemTypes } from './DraggableShip'; // import Type มาใช้\n// import './GameBoard.css';\n\n// const Cell = ({ value, onDrop, rowIndex, colIndex }) => {\n//   const [{ isOver }, drop] = useDrop(() => ({\n//     accept: ItemTypes.SHIP,\n//     // onDrop จะทำงานเมื่อเราปล่อยเรือลงบนช่องนี้\n//     drop: (item) => onDrop(item.id, { row: rowIndex, col: colIndex }),\n//     collect: (monitor) => ({\n//       isOver: !!monitor.isOver(), // เช็คว่ามีเรือลากมาอยู่เหนือช่องนี้หรือไม่\n//     }),\n//   }));\n\n//   const cellClass = `cell ${value || ''} ${isOver ? 'drop-target' : ''}`;\n\n//   // ref={drop} คือการบอกว่าช่องนี้เป็น Drop Target\n//   return <div ref={drop} className={cellClass}></div>;\n// };\n\n// // GameBoard: Component สำหรับตารางเกมทั้งหมด\n// const GameBoard = ({ board, onDropShip }) => {\n//   return (\n//     <div className=\"game-board\">\n//       {board.map((row, rowIndex) =>\n//         row.map((cellValue, colIndex) => (\n//           <Cell\n//             key={`${rowIndex}-${colIndex}`}\n//             value={cellValue}\n//             rowIndex={rowIndex}\n//             colIndex={colIndex}\n//             // ส่ง onDrop function ไปให้แต่ละ Cell\n//             onDrop={onDropShip || (() => {})}\n//           />\n//         ))\n//       )}\n//     </div>\n//   );\n// };\n\n// export default GameBoard;\n\n// //v3\n// // src/components/GameBoard.js\n// // src/components/GameBoard.js\n// import React from 'react';\n// import { useDrop } from 'react-dnd';\n// import { ItemTypes } from './DraggableShip';\n// import DraggableShip from './DraggableShip';\n// import './GameBoard.css';\n\n// // A simple cell component, it can now render hits/misses for the gameplay phase\n// const Cell = ({ value, onClick }) => {\n//     const cellClass = `cell ${value || ''}`;\n//     return <div className={cellClass} onClick={onClick}></div>;\n// };\n\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\n//   const [{ isOver }, drop] = useDrop(() => ({\n//     accept: ItemTypes.SHIP,\n//     drop: (item, monitor) => {\n//       const offset = monitor.getClientOffset();\n//       const boardElement = document.querySelector('.game-board');\n//       if (boardElement && onDropShip) {\n//         const rect = boardElement.getBoundingClientRect();\n//         // Calculate grid position from mouse coordinates\n//         const col = Math.round((offset.x - rect.left) / 42); // 40px width + 2px gap\n//         const row = Math.round((offset.y - rect.top) / 42); \n//         onDropShip(item, { row, col });\n//       }\n//     },\n//     collect: (monitor) => ({\n//       isOver: !!monitor.isOver(),\n//     }),\n//   }));\n\n//   return (\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\n//       {/* If boardData is provided (during gameplay), render it. Otherwise, render empty cells. */}\n//       {boardData ? (\n//          boardData.flat().map((cellValue, i) => (\n//             <Cell \n//                 key={i} \n//                 value={cellValue} \n//                 onClick={() => onCellClick(Math.floor(i / 8), i % 8)}\n//             />\n//          ))\n//       ) : (\n//         Array.from({ length: 64 }).map((_, i) => <Cell key={i} />)\n//       )}\n\n//       {/* Render ships that have been placed on the board */}\n//       {ships.map(ship => (\n//         <div\n//           key={ship.id}\n//           className=\"placed-ship\"\n//           style={{\n//             top: `${ship.position.row * 42}px`,\n//             left: `${ship.position.col * 42}px`,\n//           }}\n//         >\n//           <DraggableShip ship={ship} onRotate={onRotateShip} />\n//         </div>\n//       ))}\n//     </div>\n//   );\n// };\n\n// export default GameBoard;\n\n// 10/8/2025 18:00  shadow\n// src/components/GameBoard.js\n// src/components/GameBoard.js\n// src/components/GameBoard.js\n// src/components/GameBoard.js\n// import React, { useState } from 'react'; // <-- เพิ่ม useState\n// import { useDrop } from 'react-dnd';\n// import { ItemTypes } from './DraggableShip';\n// import DraggableShip from './DraggableShip';\n// import './GameBoard.css';\n\n// const Cell = ({ value, isHovered, onClick }) => {\n//     // เพิ่ม isHovered เพื่อแสดงเงา\n//     const cellClass = `cell ${value || ''} ${isHovered ? 'hover-preview' : ''}`;\n//     return <div className={cellClass} onClick={onClick}></div>;\n// };\n\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\n//   // State ใหม่สำหรับเก็บตำแหน่งที่กำลังลากเรือมาทับ\n//   const [hoveredCells, setHoveredCells] = useState([]);\n\n//   const [{ isOver }, drop] = useDrop(() => ({\n//     accept: ItemTypes.SHIP,\n//     // hover: ฟังก์ชันที่จะทำงานเมื่อมี item ลากมาอยู่เหนือ drop target\n//     hover: (item, monitor) => {\n//         const offset = monitor.getClientOffset();\n//         const boardElement = document.querySelector('.game-board');\n//         if (boardElement) {\n//             const rect = boardElement.getBoundingClientRect();\n//             const col = Math.floor((offset.x - rect.left) / 42);\n//             const row = Math.floor((offset.y - rect.top) / 42);\n\n//             const newHoveredCells = [];\n//             for (let i = 0; i < item.length; i++) {\n//                 const r = item.orientation === 'horizontal' ? row : row + i;\n//                 const c = item.orientation === 'horizontal' ? col + i : col;\n//                 if (r >= 0 && r < 8 && c >= 0 && c < 8) {\n//                     newHoveredCells.push({ r, c });\n//                 }\n//             }\n//             setHoveredCells(newHoveredCells);\n//         }\n//     },\n//     drop: (item, monitor) => {\n//       // ... โค้ดส่วน drop เหมือนเดิม ...\n//       setHoveredCells([]); // เคลียร์เงาเมื่อวางเรือเสร็จ\n//       const offset = monitor.getClientOffset();\n//       const boardElement = document.querySelector('.game-board');\n//       if (boardElement && onDropShip) {\n//         const rect = boardElement.getBoundingClientRect();\n//         const col = Math.floor((offset.x - rect.left) / 42);\n//         const row = Math.floor((offset.y - rect.top) / 42);\n//         onDropShip(item, { row, col });\n//       }\n//     },\n//     // leave: ทำงานเมื่อลาก item ออกจาก drop target\n//     leave: () => {\n//         setHoveredCells([]); // เคลียร์เงา\n//     },\n//     collect: (monitor) => ({ isOver: !!monitor.isOver() }),\n//   }));\n\n//   return (\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\n//       {boardData.flat().map((cellValue, i) => {\n//         const rowIndex = Math.floor(i / 8);\n//         const colIndex = i % 8;\n//         const isHovered = hoveredCells.some(cell => cell.r === rowIndex && cell.c === colIndex);\n//         return (\n//             <Cell\n//                 key={i}\n//                 value={cellValue}\n//                 isHovered={isHovered}\n//                 onClick={() => onCellClick(rowIndex, colIndex)}\n//             />\n//         )\n//       })}\n//       {ships.map(ship => (\n//         <div\n//           key={ship.id}\n//           className=\"placed-ship\"\n//           style={{ top: `${ship.position.row * 42}px`, left: `${ship.position.col * 42}px` }}\n//         >\n//           <DraggableShip ship={ship} onClick={onRotateShip} />\n//         </div>\n//       ))}\n//     </div>\n//   );\n// };\n\n// export default GameBoard;\n\n// 10/8/2025 20:09 hover but not vertical\n\n// src/components/Game.js// src/components/Game.js// src/components/GameBoard.js\n// import React, { useState } from 'react'; // <-- เพิ่ม useState\n// import { useDrop } from 'react-dnd';\n// import { ItemTypes } from './DraggableShip';\n// import DraggableShip from './DraggableShip';\n// import './GameBoard.css';\n\n// const Cell = ({ value, isHovered, onClick }) => {\n//     // เพิ่ม isHovered เพื่อแสดงเงา\n//     const cellClass = `cell ${value || ''} ${isHovered ? 'hover-preview' : ''}`;\n//     return <div className={cellClass} onClick={onClick}></div>;\n// };\n\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\n//   // State ใหม่สำหรับเก็บตำแหน่งที่กำลังลากเรือมาทับ\n//   const [hoveredCells, setHoveredCells] = useState([]);\n\n//   const [{ isOver }, drop] = useDrop(() => ({\n//     accept: ItemTypes.SHIP,\n//     // hover: ฟังก์ชันที่จะทำงานเมื่อมี item ลากมาอยู่เหนือ drop target\n//     hover: (item, monitor) => {\n//         const offset = monitor.getClientOffset();\n//         const boardElement = document.querySelector('.game-board');\n//         if (boardElement) {\n//             const rect = boardElement.getBoundingClientRect();\n//             const col = Math.floor((offset.x - rect.left) / 42);\n//             const row = Math.floor((offset.y - rect.top) / 42);\n\n//             const newHoveredCells = [];\n//             for (let i = 0; i < item.length; i++) {\n//                 const r = item.orientation === 'horizontal' ? row : row + i;\n//                 const c = item.orientation === 'horizontal' ? col + i : col;\n//                 if (r >= 0 && r < 8 && c >= 0 && c < 8) {\n//                     newHoveredCells.push({ r, c });\n//                 }\n//             }\n//             setHoveredCells(newHoveredCells);\n//         }\n//     },\n//     drop: (item, monitor) => {\n//       // ... โค้ดส่วน drop เหมือนเดิม ...\n//       setHoveredCells([]); // เคลียร์เงาเมื่อวางเรือเสร็จ\n//       const offset = monitor.getClientOffset();\n//       const boardElement = document.querySelector('.game-board');\n//       if (boardElement && onDropShip) {\n//         const rect = boardElement.getBoundingClientRect();\n//         const col = Math.floor((offset.x - rect.left) / 42);\n//         const row = Math.floor((offset.y - rect.top) / 42);\n//         onDropShip(item, { row, col });\n//       }\n//     },\n//     // leave: ทำงานเมื่อลาก item ออกจาก drop target\n//     leave: () => {\n//         setHoveredCells([]); // เคลียร์เงา\n//     },\n//     collect: (monitor) => ({ isOver: !!monitor.isOver() }),\n//   }));\n\n//   return (\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\n//       {boardData.flat().map((cellValue, i) => {\n//         const rowIndex = Math.floor(i / 8);\n//         const colIndex = i % 8;\n//         const isHovered = hoveredCells.some(cell => cell.r === rowIndex && cell.c === colIndex);\n//         return (\n//             <Cell\n//                 key={i}\n//                 value={cellValue}\n//                 isHovered={isHovered}\n//                 onClick={() => onCellClick(rowIndex, colIndex)}\n//             />\n//         )\n//       })}\n//       {ships.map(ship => (\n//         <div\n//           key={ship.id}\n//           className=\"placed-ship\"\n//           style={{ top: `${ship.position.row * 42}px`, left: `${ship.position.col * 42}px` }}\n//         >\n//           <DraggableShip ship={ship} onClick={onRotateShip} />\n//         </div>\n//       ))}\n//     </div>\n//   );\n// };\n\n// export default GameBoard;\n\n// src/components/GameBoard.js\nimport React, { useState } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { ItemTypes } from './DraggableShip';\nimport DraggableShip from './DraggableShip';\nimport './GameBoard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Cell = ({\n  value,\n  isHovered,\n  onClick\n}) => {\n  const cellClass = `cell ${value || ''} ${isHovered ? 'hover-preview' : ''}`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: cellClass,\n    onClick: onClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 341,\n    columnNumber: 12\n  }, this);\n};\n_c = Cell;\nconst GameBoard = ({\n  ships,\n  onDropShip,\n  onRotateShip,\n  boardData,\n  onCellClick\n}) => {\n  _s();\n  const [hoveredCells, setHoveredCells] = useState([]);\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: ItemTypes.SHIP,\n    hover: (item, monitor) => {\n      const offset = monitor.getClientOffset();\n      const boardElement = document.querySelector('.game-board');\n      if (boardElement) {\n        const rect = boardElement.getBoundingClientRect();\n        const col = Math.floor((offset.x - rect.left) / 42);\n        const row = Math.floor((offset.y - rect.top) / 42);\n        const newHoveredCells = [];\n        // --- THIS IS THE FIX ---\n        // It now reads the ship's orientation from the dragged 'item'\n        for (let i = 0; i < item.length; i++) {\n          const r = item.orientation === 'horizontal' ? row : row + i;\n          const c = item.orientation === 'horizontal' ? col + i : col;\n          if (r >= 0 && r < 8 && c >= 0 && c < 8) {\n            newHoveredCells.push({\n              r,\n              c\n            });\n          }\n        }\n        setHoveredCells(newHoveredCells);\n      }\n    },\n    drop: (item, monitor) => {\n      setHoveredCells([]);\n      const offset = monitor.getClientOffset();\n      const boardElement = document.querySelector('.game-board');\n      if (boardElement && onDropShip) {\n        const rect = boardElement.getBoundingClientRect();\n        const col = Math.floor((offset.x - rect.left) / 42);\n        const row = Math.floor((offset.y - rect.top) / 42);\n        onDropShip(item, {\n          row,\n          col\n        });\n      }\n    },\n    leave: () => {\n      setHoveredCells([]);\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drop,\n    className: \"game-board\",\n    children: [(boardData || Array(8).fill(Array(8).fill(null))).flat().map((cellValue, i) => {\n      const rowIndex = Math.floor(i / 8);\n      const colIndex = i % 8;\n      const isHovered = hoveredCells.some(cell => cell.r === rowIndex && cell.c === colIndex);\n      const clickHandler = onCellClick ? () => onCellClick(rowIndex, colIndex) : () => {};\n      return /*#__PURE__*/_jsxDEV(Cell, {\n        value: cellValue,\n        isHovered: isHovered,\n        onClick: clickHandler\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 13\n      }, this);\n    }), ships.map(ship => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"placed-ship\",\n      style: {\n        top: `${ship.position.row * 42}px`,\n        left: `${ship.position.col * 42}px`\n      },\n      children: /*#__PURE__*/_jsxDEV(DraggableShip, {\n        ship: ship,\n        onClick: onRotateShip\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }, this)\n    }, ship.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 388,\n    columnNumber: 5\n  }, this);\n};\n_s(GameBoard, \"eQaC8oSRY65E+/8/At2HvpLRVzM=\", false, function () {\n  return [useDrop];\n});\n_c2 = GameBoard;\nexport default GameBoard;\nvar _c, _c2;\n$RefreshReg$(_c, \"Cell\");\n$RefreshReg$(_c2, \"GameBoard\");","map":{"version":3,"names":["React","useState","useDrop","ItemTypes","DraggableShip","jsxDEV","_jsxDEV","Cell","value","isHovered","onClick","cellClass","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","GameBoard","ships","onDropShip","onRotateShip","boardData","onCellClick","_s","hoveredCells","setHoveredCells","isOver","drop","accept","SHIP","hover","item","monitor","offset","getClientOffset","boardElement","document","querySelector","rect","getBoundingClientRect","col","Math","floor","x","left","row","y","top","newHoveredCells","i","length","r","orientation","c","push","leave","collect","ref","children","Array","fill","flat","map","cellValue","rowIndex","colIndex","some","cell","clickHandler","ship","style","position","id","_c2","$RefreshReg$"],"sources":["C:/Users/asus/battleship-client/src/components/GameBoard.js"],"sourcesContent":["// // src/components/GameBoard.js\r\n// import React from 'react';\r\n// import './GameBoard.css'; // เราจะสร้างไฟล์ css นี้ต่อไป\r\n\r\n// // Cell: Component สำหรับแต่ละช่องในตาราง\r\n// const Cell = ({ value, onClick }) => {\r\n//   // กำหนด className ตามค่าของ value (เช่น 'ship', 'hit', 'miss')\r\n//   const cellClass = `cell ${value}`; \r\n//   return <div className={cellClass} onClick={onClick}></div>;\r\n// };\r\n\r\n// // GameBoard: Component สำหรับตารางเกมทั้งหมด\r\n// const GameBoard = ({ board, onCellClick }) => {\r\n//   return (\r\n//     <div className=\"game-board\">\r\n//       {board.map((row, rowIndex) =>\r\n//         row.map((cellValue, colIndex) => (\r\n//           <Cell\r\n//             key={`${rowIndex}-${colIndex}`}\r\n//             value={cellValue}\r\n//             onClick={() => onCellClick(rowIndex, colIndex)}\r\n//           />\r\n//         ))\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default GameBoard;\r\n\r\n\r\n//v2\r\n// src/components/GameBoard.js\r\n// import React from 'react';\r\n// import { useDrop } from 'react-dnd';\r\n// import { ItemTypes } from './DraggableShip'; // import Type มาใช้\r\n// import './GameBoard.css';\r\n\r\n// const Cell = ({ value, onDrop, rowIndex, colIndex }) => {\r\n//   const [{ isOver }, drop] = useDrop(() => ({\r\n//     accept: ItemTypes.SHIP,\r\n//     // onDrop จะทำงานเมื่อเราปล่อยเรือลงบนช่องนี้\r\n//     drop: (item) => onDrop(item.id, { row: rowIndex, col: colIndex }),\r\n//     collect: (monitor) => ({\r\n//       isOver: !!monitor.isOver(), // เช็คว่ามีเรือลากมาอยู่เหนือช่องนี้หรือไม่\r\n//     }),\r\n//   }));\r\n\r\n//   const cellClass = `cell ${value || ''} ${isOver ? 'drop-target' : ''}`;\r\n  \r\n//   // ref={drop} คือการบอกว่าช่องนี้เป็น Drop Target\r\n//   return <div ref={drop} className={cellClass}></div>;\r\n// };\r\n\r\n// // GameBoard: Component สำหรับตารางเกมทั้งหมด\r\n// const GameBoard = ({ board, onDropShip }) => {\r\n//   return (\r\n//     <div className=\"game-board\">\r\n//       {board.map((row, rowIndex) =>\r\n//         row.map((cellValue, colIndex) => (\r\n//           <Cell\r\n//             key={`${rowIndex}-${colIndex}`}\r\n//             value={cellValue}\r\n//             rowIndex={rowIndex}\r\n//             colIndex={colIndex}\r\n//             // ส่ง onDrop function ไปให้แต่ละ Cell\r\n//             onDrop={onDropShip || (() => {})}\r\n//           />\r\n//         ))\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default GameBoard;\r\n\r\n\r\n\r\n// //v3\r\n// // src/components/GameBoard.js\r\n// // src/components/GameBoard.js\r\n// import React from 'react';\r\n// import { useDrop } from 'react-dnd';\r\n// import { ItemTypes } from './DraggableShip';\r\n// import DraggableShip from './DraggableShip';\r\n// import './GameBoard.css';\r\n\r\n// // A simple cell component, it can now render hits/misses for the gameplay phase\r\n// const Cell = ({ value, onClick }) => {\r\n//     const cellClass = `cell ${value || ''}`;\r\n//     return <div className={cellClass} onClick={onClick}></div>;\r\n// };\r\n\r\n\r\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\r\n//   const [{ isOver }, drop] = useDrop(() => ({\r\n//     accept: ItemTypes.SHIP,\r\n//     drop: (item, monitor) => {\r\n//       const offset = monitor.getClientOffset();\r\n//       const boardElement = document.querySelector('.game-board');\r\n//       if (boardElement && onDropShip) {\r\n//         const rect = boardElement.getBoundingClientRect();\r\n//         // Calculate grid position from mouse coordinates\r\n//         const col = Math.round((offset.x - rect.left) / 42); // 40px width + 2px gap\r\n//         const row = Math.round((offset.y - rect.top) / 42); \r\n//         onDropShip(item, { row, col });\r\n//       }\r\n//     },\r\n//     collect: (monitor) => ({\r\n//       isOver: !!monitor.isOver(),\r\n//     }),\r\n//   }));\r\n\r\n//   return (\r\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\r\n//       {/* If boardData is provided (during gameplay), render it. Otherwise, render empty cells. */}\r\n//       {boardData ? (\r\n//          boardData.flat().map((cellValue, i) => (\r\n//             <Cell \r\n//                 key={i} \r\n//                 value={cellValue} \r\n//                 onClick={() => onCellClick(Math.floor(i / 8), i % 8)}\r\n//             />\r\n//          ))\r\n//       ) : (\r\n//         Array.from({ length: 64 }).map((_, i) => <Cell key={i} />)\r\n//       )}\r\n\r\n//       {/* Render ships that have been placed on the board */}\r\n//       {ships.map(ship => (\r\n//         <div\r\n//           key={ship.id}\r\n//           className=\"placed-ship\"\r\n//           style={{\r\n//             top: `${ship.position.row * 42}px`,\r\n//             left: `${ship.position.col * 42}px`,\r\n//           }}\r\n//         >\r\n//           <DraggableShip ship={ship} onRotate={onRotateShip} />\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default GameBoard;\r\n\r\n// 10/8/2025 18:00  shadow\r\n// src/components/GameBoard.js\r\n// src/components/GameBoard.js\r\n// src/components/GameBoard.js\r\n// src/components/GameBoard.js\r\n// import React, { useState } from 'react'; // <-- เพิ่ม useState\r\n// import { useDrop } from 'react-dnd';\r\n// import { ItemTypes } from './DraggableShip';\r\n// import DraggableShip from './DraggableShip';\r\n// import './GameBoard.css';\r\n\r\n// const Cell = ({ value, isHovered, onClick }) => {\r\n//     // เพิ่ม isHovered เพื่อแสดงเงา\r\n//     const cellClass = `cell ${value || ''} ${isHovered ? 'hover-preview' : ''}`;\r\n//     return <div className={cellClass} onClick={onClick}></div>;\r\n// };\r\n\r\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\r\n//   // State ใหม่สำหรับเก็บตำแหน่งที่กำลังลากเรือมาทับ\r\n//   const [hoveredCells, setHoveredCells] = useState([]);\r\n\r\n//   const [{ isOver }, drop] = useDrop(() => ({\r\n//     accept: ItemTypes.SHIP,\r\n//     // hover: ฟังก์ชันที่จะทำงานเมื่อมี item ลากมาอยู่เหนือ drop target\r\n//     hover: (item, monitor) => {\r\n//         const offset = monitor.getClientOffset();\r\n//         const boardElement = document.querySelector('.game-board');\r\n//         if (boardElement) {\r\n//             const rect = boardElement.getBoundingClientRect();\r\n//             const col = Math.floor((offset.x - rect.left) / 42);\r\n//             const row = Math.floor((offset.y - rect.top) / 42);\r\n\r\n//             const newHoveredCells = [];\r\n//             for (let i = 0; i < item.length; i++) {\r\n//                 const r = item.orientation === 'horizontal' ? row : row + i;\r\n//                 const c = item.orientation === 'horizontal' ? col + i : col;\r\n//                 if (r >= 0 && r < 8 && c >= 0 && c < 8) {\r\n//                     newHoveredCells.push({ r, c });\r\n//                 }\r\n//             }\r\n//             setHoveredCells(newHoveredCells);\r\n//         }\r\n//     },\r\n//     drop: (item, monitor) => {\r\n//       // ... โค้ดส่วน drop เหมือนเดิม ...\r\n//       setHoveredCells([]); // เคลียร์เงาเมื่อวางเรือเสร็จ\r\n//       const offset = monitor.getClientOffset();\r\n//       const boardElement = document.querySelector('.game-board');\r\n//       if (boardElement && onDropShip) {\r\n//         const rect = boardElement.getBoundingClientRect();\r\n//         const col = Math.floor((offset.x - rect.left) / 42);\r\n//         const row = Math.floor((offset.y - rect.top) / 42);\r\n//         onDropShip(item, { row, col });\r\n//       }\r\n//     },\r\n//     // leave: ทำงานเมื่อลาก item ออกจาก drop target\r\n//     leave: () => {\r\n//         setHoveredCells([]); // เคลียร์เงา\r\n//     },\r\n//     collect: (monitor) => ({ isOver: !!monitor.isOver() }),\r\n//   }));\r\n\r\n//   return (\r\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\r\n//       {boardData.flat().map((cellValue, i) => {\r\n//         const rowIndex = Math.floor(i / 8);\r\n//         const colIndex = i % 8;\r\n//         const isHovered = hoveredCells.some(cell => cell.r === rowIndex && cell.c === colIndex);\r\n//         return (\r\n//             <Cell\r\n//                 key={i}\r\n//                 value={cellValue}\r\n//                 isHovered={isHovered}\r\n//                 onClick={() => onCellClick(rowIndex, colIndex)}\r\n//             />\r\n//         )\r\n//       })}\r\n//       {ships.map(ship => (\r\n//         <div\r\n//           key={ship.id}\r\n//           className=\"placed-ship\"\r\n//           style={{ top: `${ship.position.row * 42}px`, left: `${ship.position.col * 42}px` }}\r\n//         >\r\n//           <DraggableShip ship={ship} onClick={onRotateShip} />\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default GameBoard;\r\n\r\n\r\n// 10/8/2025 20:09 hover but not vertical\r\n\r\n// src/components/Game.js// src/components/Game.js// src/components/GameBoard.js\r\n// import React, { useState } from 'react'; // <-- เพิ่ม useState\r\n// import { useDrop } from 'react-dnd';\r\n// import { ItemTypes } from './DraggableShip';\r\n// import DraggableShip from './DraggableShip';\r\n// import './GameBoard.css';\r\n\r\n// const Cell = ({ value, isHovered, onClick }) => {\r\n//     // เพิ่ม isHovered เพื่อแสดงเงา\r\n//     const cellClass = `cell ${value || ''} ${isHovered ? 'hover-preview' : ''}`;\r\n//     return <div className={cellClass} onClick={onClick}></div>;\r\n// };\r\n\r\n// const GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\r\n//   // State ใหม่สำหรับเก็บตำแหน่งที่กำลังลากเรือมาทับ\r\n//   const [hoveredCells, setHoveredCells] = useState([]);\r\n\r\n//   const [{ isOver }, drop] = useDrop(() => ({\r\n//     accept: ItemTypes.SHIP,\r\n//     // hover: ฟังก์ชันที่จะทำงานเมื่อมี item ลากมาอยู่เหนือ drop target\r\n//     hover: (item, monitor) => {\r\n//         const offset = monitor.getClientOffset();\r\n//         const boardElement = document.querySelector('.game-board');\r\n//         if (boardElement) {\r\n//             const rect = boardElement.getBoundingClientRect();\r\n//             const col = Math.floor((offset.x - rect.left) / 42);\r\n//             const row = Math.floor((offset.y - rect.top) / 42);\r\n\r\n//             const newHoveredCells = [];\r\n//             for (let i = 0; i < item.length; i++) {\r\n//                 const r = item.orientation === 'horizontal' ? row : row + i;\r\n//                 const c = item.orientation === 'horizontal' ? col + i : col;\r\n//                 if (r >= 0 && r < 8 && c >= 0 && c < 8) {\r\n//                     newHoveredCells.push({ r, c });\r\n//                 }\r\n//             }\r\n//             setHoveredCells(newHoveredCells);\r\n//         }\r\n//     },\r\n//     drop: (item, monitor) => {\r\n//       // ... โค้ดส่วน drop เหมือนเดิม ...\r\n//       setHoveredCells([]); // เคลียร์เงาเมื่อวางเรือเสร็จ\r\n//       const offset = monitor.getClientOffset();\r\n//       const boardElement = document.querySelector('.game-board');\r\n//       if (boardElement && onDropShip) {\r\n//         const rect = boardElement.getBoundingClientRect();\r\n//         const col = Math.floor((offset.x - rect.left) / 42);\r\n//         const row = Math.floor((offset.y - rect.top) / 42);\r\n//         onDropShip(item, { row, col });\r\n//       }\r\n//     },\r\n//     // leave: ทำงานเมื่อลาก item ออกจาก drop target\r\n//     leave: () => {\r\n//         setHoveredCells([]); // เคลียร์เงา\r\n//     },\r\n//     collect: (monitor) => ({ isOver: !!monitor.isOver() }),\r\n//   }));\r\n\r\n//   return (\r\n//     <div ref={drop} className=\"game-board\" style={{ backgroundColor: isOver ? '#00ff001a' : '#1a1d22' }}>\r\n//       {boardData.flat().map((cellValue, i) => {\r\n//         const rowIndex = Math.floor(i / 8);\r\n//         const colIndex = i % 8;\r\n//         const isHovered = hoveredCells.some(cell => cell.r === rowIndex && cell.c === colIndex);\r\n//         return (\r\n//             <Cell\r\n//                 key={i}\r\n//                 value={cellValue}\r\n//                 isHovered={isHovered}\r\n//                 onClick={() => onCellClick(rowIndex, colIndex)}\r\n//             />\r\n//         )\r\n//       })}\r\n//       {ships.map(ship => (\r\n//         <div\r\n//           key={ship.id}\r\n//           className=\"placed-ship\"\r\n//           style={{ top: `${ship.position.row * 42}px`, left: `${ship.position.col * 42}px` }}\r\n//         >\r\n//           <DraggableShip ship={ship} onClick={onRotateShip} />\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default GameBoard;\r\n\r\n\r\n// src/components/GameBoard.js\r\nimport React, { useState } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport { ItemTypes } from './DraggableShip';\r\nimport DraggableShip from './DraggableShip';\r\nimport './GameBoard.css';\r\n\r\nconst Cell = ({ value, isHovered, onClick }) => {\r\n    const cellClass = `cell ${value || ''} ${isHovered ? 'hover-preview' : ''}`;\r\n    return <div className={cellClass} onClick={onClick}></div>;\r\n};\r\n\r\nconst GameBoard = ({ ships, onDropShip, onRotateShip, boardData, onCellClick }) => {\r\n  const [hoveredCells, setHoveredCells] = useState([]);\r\n\r\n  const [{ isOver }, drop] = useDrop(() => ({\r\n    accept: ItemTypes.SHIP,\r\n    hover: (item, monitor) => {\r\n        const offset = monitor.getClientOffset();\r\n        const boardElement = document.querySelector('.game-board');\r\n        if (boardElement) {\r\n            const rect = boardElement.getBoundingClientRect();\r\n            const col = Math.floor((offset.x - rect.left) / 42);\r\n            const row = Math.floor((offset.y - rect.top) / 42);\r\n\r\n            const newHoveredCells = [];\r\n            // --- THIS IS THE FIX ---\r\n            // It now reads the ship's orientation from the dragged 'item'\r\n            for (let i = 0; i < item.length; i++) {\r\n                const r = item.orientation === 'horizontal' ? row : row + i;\r\n                const c = item.orientation === 'horizontal' ? col + i : col;\r\n                if (r >= 0 && r < 8 && c >= 0 && c < 8) {\r\n                    newHoveredCells.push({ r, c });\r\n                }\r\n            }\r\n            setHoveredCells(newHoveredCells);\r\n        }\r\n    },\r\n    drop: (item, monitor) => {\r\n      setHoveredCells([]);\r\n      const offset = monitor.getClientOffset();\r\n      const boardElement = document.querySelector('.game-board');\r\n      if (boardElement && onDropShip) {\r\n        const rect = boardElement.getBoundingClientRect();\r\n        const col = Math.floor((offset.x - rect.left) / 42);\r\n        const row = Math.floor((offset.y - rect.top) / 42);\r\n        onDropShip(item, { row, col });\r\n      }\r\n    },\r\n    leave: () => {\r\n        setHoveredCells([]);\r\n    },\r\n    collect: (monitor) => ({ isOver: !!monitor.isOver() }),\r\n  }));\r\n\r\n  return (\r\n    <div ref={drop} className=\"game-board\">\r\n      {/* --- This part is also corrected to handle empty boardData --- */}\r\n      {(boardData || Array(8).fill(Array(8).fill(null))).flat().map((cellValue, i) => {\r\n        const rowIndex = Math.floor(i / 8);\r\n        const colIndex = i % 8;\r\n        const isHovered = hoveredCells.some(cell => cell.r === rowIndex && cell.c === colIndex);\r\n        const clickHandler = onCellClick ? () => onCellClick(rowIndex, colIndex) : () => {};\r\n        return (\r\n            <Cell\r\n                key={i}\r\n                value={cellValue}\r\n                isHovered={isHovered}\r\n                onClick={clickHandler}\r\n            />\r\n        )\r\n      })}\r\n      {ships.map(ship => (\r\n        <div\r\n          key={ship.id}\r\n          className=\"placed-ship\"\r\n          style={{ top: `${ship.position.row * 42}px`, left: `${ship.position.col * 42}px` }}\r\n        >\r\n          <DraggableShip ship={ship} onClick={onRotateShip} />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameBoard;"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;A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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}