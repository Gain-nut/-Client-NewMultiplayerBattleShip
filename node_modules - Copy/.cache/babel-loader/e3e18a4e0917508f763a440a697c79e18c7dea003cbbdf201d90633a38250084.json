{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\battleship-client\\\\src\\\\components\\\\Game.js\",\n  _s = $RefreshSig$();\n// // src/components/Game.js\n// import React from 'react';\n\n// function Game({ gameState, nickname }) {\n//   if (!gameState) {\n//     return <div>Loading game...</div>;\n//   }\n\n//   // แปลง object players ให้เป็น array เพื่อให้ map ได้ง่าย\n//   const players = Object.values(gameState.players);\n\n//   return (\n//     <div>\n//       <h2>Welcome, {nickname}!</h2>\n//       <h3>Players in Lobby:</h3>\n//       <ul>\n//         {players.map((player, index) => (\n//           <li key={index}>{player.nickname}</li>\n//         ))}\n//       </ul>\n//       {players.length < 2 && <p>Waiting for another player to join...</p>}\n//     </div>\n//   );\n// }\n\n// export default Game;\n// src/components/Game.js\nimport React, { useState } from 'react';\nimport { socket } from '../socket';\nimport GameBoard from './GameBoard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Game({\n  gameState,\n  nickname\n}) {\n  _s();\n  // State สำหรับเก็บตำแหน่งเรือที่เรากำลังจะวาง\n  const [myShips, setMyShips] = useState([]);\n  const shipsToPlace = 4; // ตามโจทย์คือ 4 ลำ ลำละ 4 ช่อง (รวม 16 ช่อง)\n  const shipLength = 4; // แต่ตอนนี้เราจะทำแบบง่ายๆ คือวางทีละช่องก่อน\n\n  if (!gameState) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading game...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 12\n    }, this);\n  }\n  const handleCellClick = (row, col) => {\n    // ถ้ายังวางเรือไม่ครบ\n    if (gameState.gameStatus === 'placing' && myShips.length < 16) {\n      const newShip = {\n        row,\n        col\n      };\n      // ป้องกันการคลิกซ้ำช่องเดิม\n      if (!myShips.some(ship => ship.row === row && ship.col === col)) {\n        setMyShips([...myShips, newShip]);\n      }\n    }\n  };\n  const handleConfirmPlacement = () => {\n    if (myShips.length === 16) {\n      socket.emit('place-ships', myShips);\n    } else {\n      alert('Please place all 16 ship parts.');\n    }\n  };\n\n  // สร้าง board แสดงผลจาก state ของ myShips\n  const myBoard = Array(8).fill(null).map(() => Array(8).fill(null));\n  myShips.forEach(ship => {\n    myBoard[ship.row][ship.col] = 'ship';\n  });\n  const thisPlayer = Object.values(gameState.players).find(p => p.nickname === nickname);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Welcome, \", nickname, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), gameState.gameStatus === 'placing' && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Place Your Ships (\", myShips.length, \" / 16 parts)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(GameBoard, {\n        board: myBoard,\n        onCellClick: handleCellClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), thisPlayer && thisPlayer.ships.length === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleConfirmPlacement,\n        disabled: myShips.length !== 16,\n        children: \"Confirm Placement\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 14\n      }, this), thisPlayer && thisPlayer.ships.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Waiting for opponent to place ships...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this), gameState.gameStatus === 'playing' && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Game has started!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(Game, \"2qVjoQzSKs0ttXWh7T698UwjBMw=\");\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useState","socket","GameBoard","jsxDEV","_jsxDEV","Game","gameState","nickname","_s","myShips","setMyShips","shipsToPlace","shipLength","children","fileName","_jsxFileName","lineNumber","columnNumber","handleCellClick","row","col","gameStatus","length","newShip","some","ship","handleConfirmPlacement","emit","alert","myBoard","Array","fill","map","forEach","thisPlayer","Object","values","players","find","p","board","onCellClick","ships","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/asus/battleship-client/src/components/Game.js"],"sourcesContent":["// // src/components/Game.js\r\n// import React from 'react';\r\n\r\n// function Game({ gameState, nickname }) {\r\n//   if (!gameState) {\r\n//     return <div>Loading game...</div>;\r\n//   }\r\n  \r\n//   // แปลง object players ให้เป็น array เพื่อให้ map ได้ง่าย\r\n//   const players = Object.values(gameState.players);\r\n\r\n//   return (\r\n//     <div>\r\n//       <h2>Welcome, {nickname}!</h2>\r\n//       <h3>Players in Lobby:</h3>\r\n//       <ul>\r\n//         {players.map((player, index) => (\r\n//           <li key={index}>{player.nickname}</li>\r\n//         ))}\r\n//       </ul>\r\n//       {players.length < 2 && <p>Waiting for another player to join...</p>}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Game;\r\n// src/components/Game.js\r\nimport React, { useState } from 'react';\r\nimport { socket } from '../socket';\r\nimport GameBoard from './GameBoard';\r\n\r\nfunction Game({ gameState, nickname }) {\r\n  // State สำหรับเก็บตำแหน่งเรือที่เรากำลังจะวาง\r\n  const [myShips, setMyShips] = useState([]);\r\n  const shipsToPlace = 4; // ตามโจทย์คือ 4 ลำ ลำละ 4 ช่อง (รวม 16 ช่อง)\r\n  const shipLength = 4; // แต่ตอนนี้เราจะทำแบบง่ายๆ คือวางทีละช่องก่อน\r\n\r\n  if (!gameState) {\r\n    return <div>Loading game...</div>;\r\n  }\r\n\r\n  const handleCellClick = (row, col) => {\r\n    // ถ้ายังวางเรือไม่ครบ\r\n    if (gameState.gameStatus === 'placing' && myShips.length < 16) {\r\n      const newShip = { row, col };\r\n      // ป้องกันการคลิกซ้ำช่องเดิม\r\n      if (!myShips.some(ship => ship.row === row && ship.col === col)) {\r\n        setMyShips([...myShips, newShip]);\r\n      }\r\n    }\r\n  };\r\n  \r\n  const handleConfirmPlacement = () => {\r\n    if (myShips.length === 16) {\r\n        socket.emit('place-ships', myShips);\r\n    } else {\r\n        alert('Please place all 16 ship parts.');\r\n    }\r\n  }\r\n\r\n  // สร้าง board แสดงผลจาก state ของ myShips\r\n  const myBoard = Array(8).fill(null).map(() => Array(8).fill(null));\r\n  myShips.forEach(ship => {\r\n    myBoard[ship.row][ship.col] = 'ship';\r\n  });\r\n  \r\n  const thisPlayer = Object.values(gameState.players).find(p => p.nickname === nickname);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Welcome, {nickname}!</h2>\r\n\r\n      {gameState.gameStatus === 'placing' && (\r\n        <div>\r\n          <h3>Place Your Ships ({myShips.length} / 16 parts)</h3>\r\n          <GameBoard board={myBoard} onCellClick={handleCellClick} />\r\n          { thisPlayer && thisPlayer.ships.length === 0 && (\r\n             <button onClick={handleConfirmPlacement} disabled={myShips.length !== 16}>\r\n                Confirm Placement\r\n             </button>\r\n          )}\r\n          { thisPlayer && thisPlayer.ships.length > 0 && (\r\n             <p>Waiting for opponent to place ships...</p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {gameState.gameStatus === 'playing' && (\r\n        <div>\r\n            <h2>Game has started!</h2>\r\n            {/* เราจะใส่ตาราง 2 อันตรงนี้ในขั้นตอนถัดไป */}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Game;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}